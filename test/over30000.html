

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <script src="https://staging-d.ea-shutto-translation.net/trans.js?id=241"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <script type="text/javascript" src="http://www.intra-mart.jpc747.systranlinks.net/sl_language_selector.js"></script>
    <title>設定ファイルの編集（アップデートによる設定項目のメンテナンス） &mdash; IM-FormaDesigner for Accel Platform セットアップガイド &nbsp; 第28版 2020-12-01 &nbsp; </title>
    
    <link rel="stylesheet" href="../../../_static/main.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '第28版 2020-12-01',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/translations.js"></script>
    <link rel="top" title="" href="../../../index.html" />


    <script type="text/javascript" src="../../../_static/jquery.cookie.js"></script>
    <!--[if IE 8]>
      <link rel="stylesheet" href="../../../_static/ie8.css" type="text/css" />
    <![endif]-->
    <!--[if lte IE 9.0]>
      <script type="text/javascript">
        window.disableQuickSearch = true;
      </script>
      <link rel="stylesheet" href="../../../_static/ie9.css" type="text/css" />
    <![endif]-->


  </head>
  <body >
    <div>30000万文字以上のページのテストです。<br>

<a href="#" data-stt-changelang="ja" data-stt-ignore>日本語</a> | 
<a href="#" data-stt-changelang="en" data-stt-ignore>English</a> | 
<a href="#" data-stt-changelang="zh-CN" data-stt-ignore>中国（简体）</a> | 
<a href="#" data-stt-changelang="zh-TW" data-stt-ignore>中國（繁體）</a></div>
<div>
<div class="container">
  <div class="header">
    <div class="heading">
      <p class="left">
        <a href="http://www.intra-mart.jp/document/library/index.html" title="intra-mart Accel Series Document Library">
          <span class="header-logo"></span>
        </a>
        <span class="name-split" style="display:none;">&nbsp;|&nbsp;</span>
      </p>
      <p class="right">
        <a href="../../../index.html" class="document-name">
          <span class="product-name"></span>
          IM-FormaDesigner for Accel Platform セットアップガイド
        </a>
        <span class="heading-supplementation">第28版 2020-12-01</span>
      </p>
    </div>

    <div class="quicksearch">
<div id="searchbox">
  <script type="text/javascript" src="../../../_static/oktavia-jquery-ui.js"></script>
  <link rel="stylesheet" href="../../../_static/searchstyle.css" type="text/css" />
  <div id="oktavia_search_form" data-index="searchindex.oktavia.js">
    <form class="oktavia_form">
      <label>クイック検索</label>
      <input class="oktavia_search" result="10" type="search" name="search" value="" placeholder="クイック検索" />
      <input type="submit" value="検索" />
    </form>
  </div>
</div>
<!--
<div id="searchbox" class="hoge" style="display: none">
  <label>クイック検索</label>
  <form class="search" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="クイック検索" />
    <input type="submit" value="検索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
-->
    </div>
  </div>

  <div class="pdf-header">
    <div class="left"><span class="header-logo"></span></div>
    <div class="right">
      <span class="product-name"></span>
      <span class="shorttitle">IM-FormaDesigner for Accel Platform セットアップガイド</span>
      <span class="heading-supplementation">第28版 2020-12-01</span>
    </div>
  </div>

  <div class="nav topnav">
    
  <p class="cf">
    <a class="uplink" href="../../../index.html">目次</a>
  </p>

  </div>

  <div class="wrapper">
      <div id="sidebar-left" class="sidebar active">
        
    <div class="sphinxsidebar">
      <div class="sphinxsidebarwrapper">
<h3><a href="../../../index.html">目次</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../revision_history/index.html">1. 改訂情報</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">2. はじめに</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../flowchart/index.html">3. セットアップの流れ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_file.html">4. IM-FormaDesigner の設定ファイル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tenant/setup_to_tenant.html">5. テナント環境セットアップ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../change_to_project.html">6. アップデート・パッチの適用</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uninstration/index.html">7. アンインストール</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../forma_apps/index.html">8. IM-FormaDesigner 帳票アプリケーション集のセットアップ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/index.html">9. 付録</a></li>
</ul>

      </div>
    </div>
      </div>
      <div class="content">
        
<blockquote>
<div></div></blockquote>
<div class="section" id="editing-configration-file">
<span id="id1"></span><h1>設定ファイルの編集（アップデートによる設定項目のメンテナンス）<a class="headerlink" href="#editing-configration-file" title="このヘッドラインへのパーマリンク">¶</a></h1>
<blockquote>
<div><div class="line-block">
<div class="line">これは、IM-FormaDesigner のアップデートによる設定項目のメンテナンスです。</div>
<div class="line">他の製品をご利用の方は、他の製品のアップデートによる設定項目のメンテナンスを参照してください。</div>
</div>
<div class="line-block">
<div class="line">アップデート版を適用前に環境を構築している場合、次の作業が必要です。</div>
<div class="line">アップデート前のバージョン別に必要な作業が異なります。</div>
</div>
<blockquote>
<div><div class="admonition warning">
<p class="first admonition-title">注意</p>
<div class="line-block">
<div class="line">たとえば、アップデート前のバージョンが 2012 Summer(8.0.0)、 アップデート後のバージョンが 2016 Summer(8.0.13) の場合、以下のとおり各アップデートの作業が必要です。</div>
</div>
<blockquote class="last">
<div><ul class="simple">
<li>「IM-FormaDesigner 2012 Summer(8.0.0) からアップデート」</li>
<li>「IM-FormaDesigner 2012 Autumn(8.0.1) からアップデート」</li>
<li>「IM-FormaDesigner 2012 Winter(8.0.2) からアップデート」</li>
<li>「IM-FormaDesigner 2013 Spring(8.0.3) からアップデート」</li>
<li>「IM-FormaDesigner 2013 Summer(8.0.4) からアップデート」</li>
<li>「IM-FormaDesigner 2013 Winter(8.0.5) からアップデート」</li>
<li>「IM-FormaDesigner 2014 Spring(8.0.6) からアップデート」</li>
<li>「IM-FormaDesigner 2014 Winter(8.0.8) からアップデート」</li>
<li>「IM-FormaDesigner 2015 Spring(8.0.9) からアップデート」</li>
<li>「IM-FormaDesigner 2015 Winter(8.0.11) からアップデート」</li>
<li>「IM-FormaDesigner 2016 Spring(8.0.12) からアップデート」</li>
</ul>
</div></blockquote>
</div>
</div></blockquote>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">注意</p>
<div class="last line-block">
<div class="line">forma_config.xml に設定を追加する際は、必ず画像で示されている位置に追加してください。</div>
<div class="line">画像と異なる位置に設定を追加した場合、正常に動作しない可能性があります。</div>
</div>
</div>
<div class="contents local topic" id="id2">
<p class="topic-title first">項目</p>
<ul class="simple">
<li><a class="reference internal" href="#local-forma-2012-summer-8-0-0" id="id31">IM-FormaDesigner 2012 Summer(8.0.0) からアップデート</a><ul>
<li><a class="reference internal" href="#id3" id="id32">英語版・中国語版のラベルの表示</a></li>
<li><a class="reference internal" href="#forma-config" id="id33">forma-configの設定追加</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-forma-2012-autumn-8-0-1" id="id34">IM-FormaDesigner 2012 Autumn(8.0.1) からアップデート</a><ul>
<li><a class="reference internal" href="#id4" id="id35">forma-configの設定追加</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-forma-2012-winter-8-0-2" id="id36">IM-FormaDesigner 2012 Winter(8.0.2) からアップデート</a><ul>
<li><a class="reference internal" href="#local-forma" id="id37">IM-FormaDesigner で作成したコンテンツ定義の操作（スマートフォン版）</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-forma-2013-spring-8-0-3" id="id38">IM-FormaDesigner 2013 Spring(8.0.3) からアップデート</a><ul>
<li><a class="reference internal" href="#pdfurl" id="id39">PDF出力用のリクエスト先サーバのベースURLの設定</a></li>
<li><a class="reference internal" href="#wf" id="id40">WF申請書再利用画面用のリソースグループの設定</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-forma-2013-summer-8-0-4" id="id41">IM-FormaDesigner 2013 Summer(8.0.4) からアップデート</a><ul>
<li><a class="reference internal" href="#auto-no-setting" id="id42">採番処理時のリトライ回数（auto-no-setting）を設定する</a></li>
<li><a class="reference internal" href="#pdfwkhtmltopdf" id="id43">PDF出力時の「wkhtmltopdf」オプションを設定する</a></li>
<li><a class="reference internal" href="#numbering-item-update" id="id44">採番アイテム拡張に伴うテーブルデータの更新</a></li>
<li><a class="reference internal" href="#numbering-data-update" id="id45">採番アイテムの排他制御仕様変更に伴うテーブルデータの更新</a></li>
<li><a class="reference internal" href="#id7" id="id46">制限事項</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-forma-2013-winter-8-0-5" id="id47">IM-FormaDesigner 2013 Winter(8.0.5) からアップデート</a><ul>
<li><a class="reference internal" href="#windows" id="id48">Windows統合認証環境利用時に認証用ユーザ情報を設定する</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-forma-2014-spring-8-0-6" id="id49">IM-FormaDesigner 2014 Spring(8.0.6) からアップデート</a><ul>
<li><a class="reference internal" href="#escape-full-width-percent-and-underscore-flag" id="id50">データベース検索時のエスケープフラグ（escape-full-width-percent-and-underscore-flag）を設定する</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-forma-2014-winter-8-0-8" id="id51">IM-FormaDesigner 2014 Winter(8.0.8) からアップデート</a><ul>
<li><a class="reference internal" href="#url" id="id52">セーフURLの設定</a></li>
<li><a class="reference internal" href="#id8" id="id53">forma-configの設定追加（画面アイテム「リッチテキストボックス」）</a></li>
<li><a class="reference internal" href="#id9" id="id54">forma-configの設定追加（データ型「バイナリ」の追加）</a></li>
<li><a class="reference internal" href="#template-html" id="id55">template.htmlの更新</a></li>
<li><a class="reference internal" href="#pdf" id="id56">PDF出力機能改善モジュールの差替え</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-forma-2015-spring-8-0-9" id="id57">IM-FormaDesigner 2015 Spring(8.0.9) からアップデート</a><ul>
<li><a class="reference internal" href="#id10" id="id58">forma-configの設定追加（スマートフォン表示の設定）</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-forma-2015-winter-8-0-11" id="id59">IM-FormaDesigner 2015 Winter(8.0.11) からアップデート</a><ul>
<li><a class="reference internal" href="#id11" id="id60">PDF出力機能のベースURL、タイムアウト時間の設定</a></li>
<li><a class="reference internal" href="#template-htmltemplate-sp-html" id="id61">template.html、template_sp.htmlの更新</a></li>
<li><a class="reference internal" href="#id12" id="id62">IM-FormaDesigner で作成したコンテンツ定義の操作（アクション処理後のセッション削除処理の追加）</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-forma-2016-spring-8-0-12" id="id63">IM-FormaDesigner 2016 Spring(8.0.12) からアップデート</a><ul>
<li><a class="reference internal" href="#id13" id="id64">セレクトボックス系アイテムの最大表示項目数の設定</a></li>
<li><a class="reference internal" href="#id14" id="id65">ファイルアップロードの保存先の設定</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-forma-2016-winter-8-0-14" id="id66">IM-FormaDesigner 2016 Winter(8.0.14) からアップデート</a><ul>
<li><a class="reference internal" href="#id15" id="id67">共通マスタアイテムのデータサイズの変更</a></li>
<li><a class="reference internal" href="#id16" id="id68">template.html、template_sp.htmlの更新</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-forma-2017-spring-8-0-15" id="id69">IM-FormaDesigner 2017 Spring(8.0.15) からアップデート</a><ul>
<li><a class="reference internal" href="#template-tab-html" id="id70">template_tab.htmlの更新</a></li>
<li><a class="reference internal" href="#forma-config-undoredo" id="id71">forma-configの設定追加（フォーム・デザイナのUndo・Redo機能／リッチテキストボックスの画像挿入機能の利用有無の追加）</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-forma-2017-summer-8-0-16" id="id72">IM-FormaDesigner 2017 Summer(8.0.16) からアップデート</a><ul>
<li><a class="reference internal" href="#id19" id="id73">template.html、template_sp.htmlの更新</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-forma-2017-winter-8-0-17" id="id74">IM-FormaDesigner 2017 Winter(8.0.17) からアップデート</a><ul>
<li><a class="reference internal" href="#id22" id="id75">forma-configの設定追加（画面アイテム「ボタン(コピー新規)」）</a></li>
<li><a class="reference internal" href="#id23" id="id76">template.html、template_sp.htmlの更新</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-forma-2018-spring-8-0-18" id="id77">IM-FormaDesigner 2018 Spring(8.0.18) からアップデート</a><ul>
<li><a class="reference internal" href="#id25" id="id78">template.html、template_sp.htmlの更新</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-forma-2018-summer-8-0-19" id="id79">IM-FormaDesigner 2018 Summer(8.0.19) からアップデート</a><ul>
<li><a class="reference internal" href="#forma-config-iap-ui" id="id80">forma-configの設定追加（フォーム・デザイナのiAP UIデザインモードの追加）</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-forma-2019-winter-8-0-23" id="id81">IM-FormaDesigner 2019 Winter(8.0.23) からアップデート</a><ul>
<li><a class="reference internal" href="#template-sp-html" id="id82">template_sp.htmlの更新</a></li>
</ul>
</li>
<li><a class="reference internal" href="#local-forma-2020-summer-8-0-25" id="id83">IM-FormaDesigner 2020 Summer(8.0.25) からアップデート</a><ul>
<li><a class="reference internal" href="#id29" id="id84">template.htmlの更新</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="local-forma-2012-summer-8-0-0">
<span id="update-from-8-0-0"></span><h2><a class="toc-backref" href="#id31">IM-FormaDesigner 2012 Summer(8.0.0) からアップデート</a><a class="headerlink" href="#local-forma-2012-summer-8-0-0" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id32">英語版・中国語版のラベルの表示</a><a class="headerlink" href="#id3" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">既に8.0.0でテナント環境構築後の場合、システム管理者としてログインし、テナント環境セットアップを行ってください。</div>
<div class="line">これにより、英語版・中国語のラベルが登録されます。</div>
</div>
</div></blockquote>
</div>
<div class="section" id="forma-config">
<span id="forma-config-setting"></span><h3><a class="toc-backref" href="#id33">forma-configの設定追加</a><a class="headerlink" href="#forma-config" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><ol class="arabic">
<li><p class="first">「ProjectNavigator」内の「 &lt;（プロジェクト名）/conf/forma-config.xml&gt; ファイル」をダブルクリックで開き、「ソース」を選択してください。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_11.png"><img alt="../../../_images/forma_config_11.png" src="../../../_images/forma_config_11.png" style="width: 715.4px; height: 508.2px;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">&lt;exclude-itemselect&gt; に「<strong>product_72_func</strong>」を追加します。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_21.png"><img alt="../../../_images/forma_config_21.png" src="../../../_images/forma_config_21.png" style="width: 715.4px; height: 508.2px;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">&lt;itemHelpUrl&gt; を以下の内容に変更します。</p>
<ul>
<li><p class="first">IM-FormaDesigner のみを導入している場合</p>
<div class="highlight-none"><div class="highlight"><pre>&lt;help-setting&gt;
    &lt;itemHelpUrl&gt;http://www.intra-mart.jp/document/library/forma/public/forma_designer_help/item_help/common/item/&lt;/itemHelpUrl&gt;
    &lt;designerHelpUrl&gt;http://www.intra-mart.jp/document/library/forma/public/forma_designer_help/designer_help/forma.html&lt;/designerHelpUrl&gt;
&lt;/help-setting&gt;
</pre></div>
</div>
</li>
<li><p class="first">IM-BIS を導入している場合</p>
<div class="highlight-none"><div class="highlight"><pre>&lt;help-setting&gt;
   &lt;itemHelpUrl&gt;http://www.intra-mart.jp/document/library/bis/public/bis_designer_help/item_help/common/item/&lt;/itemHelpUrl&gt;
   &lt;designerHelpUrl&gt;http://www.intra-mart.jp/document/library/bis/public/bis_designer_help/designer_help/bis.html&lt;/designerHelpUrl&gt;
&lt;/help-setting&gt;
</pre></div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_3.png"><img alt="../../../_images/forma_config_3.png" src="../../../_images/forma_config_3.png" style="width: 738.5px; height: 455.7px;" /></a>
</div>
</li>
</ul>
</li>
</ol>
</div></blockquote>
</div>
</div>
<div class="section" id="local-forma-2012-autumn-8-0-1">
<span id="update-from-8-0-1"></span><h2><a class="toc-backref" href="#id34">IM-FormaDesigner 2012 Autumn(8.0.1) からアップデート</a><a class="headerlink" href="#local-forma-2012-autumn-8-0-1" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id4">
<h3><a class="toc-backref" href="#id35">forma-configの設定追加</a><a class="headerlink" href="#id4" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">詳細は、「IM-FormaDesigner 2012 Summer(8.0.0) からアップデート → <a class="reference internal" href="#forma-config-setting"><em>forma-configの設定追加</em></a>  」を参照してください。</div>
<div class="line"><br /></div>
<div class="line">今回のバージョンより、画面アイテムのツールキットへの組込み方法を改善します。</div>
<div class="line">これまでは、独自に開発した画面アイテム等は、設定ファイル(<strong>forma-config.xml</strong>)を直接編集して追加していましたが、設定ファイルへの差込み機能を追加します。</div>
<div class="line"><br /></div>
<div class="line">IM-BIS 製品や、今後のアップデートなどで定義ファイルに変更があった場合の拡張機能として、定義情報を追加、または更新（上書き）が可能な機能を追加します。</div>
<div class="line">そのため、拡張用の設定ファイルとして新たにスキーマを追加します。</div>
<div class="line"><br /></div>
<div class="line">conf の配下に「forma-extension-config」とフォルダを置き、その下にある設定ファイルの情報を読み取り、conf 配下の情報に追加、または上書き更新を行う仕組みとします。</div>
</div>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">コラム</p>
<div class="last line-block">
<div class="line">「forma-extension-config」フォルダ内の設定ファイルのファイル名は任意です。</div>
<div class="line">ただし、「forma-extension-config」の定義ファイル同士でマージを行う場合は、ロードされる順番を考慮した名前でファイル名を決定する必要があります。</div>
</div>
</div>
</div></blockquote>
<div class="line-block">
<div class="line">差込み用の設定ファイルは、toolkit-setting要素とhelp-setting要素のマージを行います。</div>
<div class="line">また、一番上の親要素は、forma-extension-config要素です。</div>
</div>
<ul>
<li><p class="first">toolkit-setting要素の子要素の設定について</p>
<div class="line-block">
<div class="line">新たに作成した画面アイテムを、フォーム編集で利用するための設定を行うことができます。</div>
<div class="line">差込み可能な各要素の仕様は下記の通りです。</div>
</div>
<ul>
<li><p class="first">&lt;define-item&gt;</p>
<p>item-path要素に画面アイテムのソースが配置されているディレクトリのパスを指定します。</p>
</li>
<li><p class="first">&lt;default-grouping&gt;</p>
<div class="line-block">
<div class="line">ツールキット上でどのカテゴリに表示するかを設定します。</div>
<div class="line">カテゴリと対応するグループID（group-id要素）の一覧は以下の通りです。</div>
<div class="line">グループID（group-id要素）は、default-grouping要素の子要素であるgroup要素に対して１つ設定されます。</div>
</div>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>入力アイテム</td>
<td>input</td>
</tr>
<tr class="row-even"><td>ボタンアイテム</td>
<td>button</td>
</tr>
<tr class="row-odd"><td>共通マスタアイテム</td>
<td>master</td>
</tr>
<tr class="row-even"><td>WFアイテム</td>
<td>workflow</td>
</tr>
<tr class="row-odd"><td>汎用アイテム</td>
<td>general</td>
</tr>
<tr class="row-even"><td>表示アイテム</td>
<td>display</td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="line-block">
<div class="line">表示させるカテゴリのグループID（group-id要素）の同列要素として、item-id要素にアイテムIDを指定します。</div>
<div class="line">また、application-type属性でどのアプリケーションタイプで表示するかを制御することが可能です。</div>
<div class="line">アプリケーションタイプに対応するapplication-type属性に指定できる値については以下の通りです。</div>
<div class="line">なお、application-type属性は「,」（カンマ）区切りで複数指定することが可能です。</div>
</div>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>(Forma)標準</td>
<td>std</td>
</tr>
<tr class="row-even"><td>(Forma)IM-Workflow</td>
<td>imw</td>
</tr>
<tr class="row-odd"><td>(BIS)BISフロー</td>
<td>bis-bf</td>
</tr>
<tr class="row-even"><td>(BIS)ワークフロー(WF)</td>
<td>bis_wkf</td>
</tr>
<tr class="row-odd"><td>設定なし</td>
<td>すべてのアプリケーションタイプで利用可</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first">&lt;css-path&gt;</p>
<div class="line-block">
<div class="line">利用するCSSスプライトのCSSファイルのパスを指定します。</div>
<div class="line">画像は、すべてCSSスプライトを利用しています。</div>
<div class="line">画像を追加する場合は、CSSスプライト用の画像とCSSファイルを用意してください。</div>
</div>
</li>
</ul>
</li>
<li><p class="first">設定例１</p>
<div class="line-block">
<div class="line">以下の設定ファイルでは、hogeとhoge2という画面アイテムを、それぞれ共通マスタと表示アイテムに追加するように定義しています。</div>
<div class="line">hogeは、item-id要素のapplication-type属性の指定により、アプリケーションタイプが標準の場合のみ表示されるように設定しています。</div>
<div class="line">hoge2は、特に指定していないので、すべてのアプリケーションタイプで表示されるように設定しています。</div>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;forma-extension-config</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.intra-mart.jp/forma-extension-config&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.intra-mart.jp/forma-extension-config ../../schema/forma-extension-config.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;toolkit-setting&gt;</span>
        <span class="nt">&lt;define-item&gt;</span>
            <span class="nt">&lt;item-path&gt;</span>forma/designer/types/product/sample/hoge<span class="nt">&lt;/item-path&gt;</span>
            <span class="nt">&lt;item-path&gt;</span>forma/designer/types/product/sample/hoge2<span class="nt">&lt;/item-path&gt;</span>
        <span class="nt">&lt;/define-item&gt;</span>
        <span class="nt">&lt;default-grouping&gt;</span>
            <span class="nt">&lt;group&gt;</span>
                <span class="nt">&lt;group-id&gt;</span>master<span class="nt">&lt;/group-id&gt;</span>
                <span class="nt">&lt;item-id</span> <span class="na">application-type=</span><span class="s">&quot;std&quot;</span><span class="nt">&gt;</span>hoge<span class="nt">&lt;/item-id&gt;</span>
            <span class="nt">&lt;/group&gt;</span>
            <span class="nt">&lt;group&gt;</span>
                <span class="nt">&lt;group-id&gt;</span>display<span class="nt">&lt;/group-id&gt;</span>
                <span class="nt">&lt;item-id&gt;</span>hoge2<span class="nt">&lt;/item-id&gt;</span>
            <span class="nt">&lt;/group&gt;</span>
        <span class="nt">&lt;/default-grouping&gt;</span>
    <span class="nt">&lt;/toolkit-setting&gt;</span>
<span class="nt">&lt;/forma-extension-config&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">設定例２</p>
<div class="line-block">
<div class="line">以下の設定ファイルでは、BPW用のアイテムbis_hogeとbis_hoge2に追加するように定義しています。</div>
<div class="line">それぞれ、ボタンと汎用アイテムに表示されるように設定されています。</div>
<div class="line">また、bis_hogeはitem-id要素のapplication-type属性によって、標準、IM-Workflow 、BISフローで利用できるように設定されています。</div>
<div class="line">bis_hoge2は、BISフローと IM-BIS のワークフロー(WF)で利用できるように設定されています。</div>
<div class="line"><br /></div>
<div class="line">またcss-pathで、CSSスプライトの追加をしています。</div>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;forma-extension-config</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.intra-mart.jp/forma-extension-config&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.intra-mart.jp/forma-extension-config ../../schema/forma-extension-config.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;toolkit-setting&gt;</span>
        <span class="nt">&lt;define-item&gt;</span>
            <span class="nt">&lt;item-path&gt;</span>forma/designer/types/product/sample/bis_hoge<span class="nt">&lt;/item-path&gt;</span>
            <span class="nt">&lt;item-path&gt;</span>forma/designer/types/product/sample/bis_hoge2<span class="nt">&lt;/item-path&gt;</span>
        <span class="nt">&lt;/define-item&gt;</span>
        <span class="nt">&lt;default-grouping&gt;</span>
            <span class="nt">&lt;group&gt;</span>
                <span class="nt">&lt;group-id&gt;</span>button<span class="nt">&lt;/group-id&gt;</span>
                <span class="nt">&lt;item-id</span> <span class="na">application-type=</span><span class="s">&quot;std,imw,bis_bf&quot;</span><span class="nt">&gt;</span>bis_hoge<span class="nt">&lt;/item-id&gt;</span>
            <span class="nt">&lt;/group&gt;</span>
            <span class="nt">&lt;group&gt;</span>
                <span class="nt">&lt;group-id&gt;</span>general<span class="nt">&lt;/group-id&gt;</span>
                <span class="nt">&lt;item-id</span> <span class="na">application-type=</span><span class="s">&quot;bis_bf,bis_wkf&quot;</span><span class="nt">&gt;</span>bis_hoge2<span class="nt">&lt;/item-id&gt;</span>
            <span class="nt">&lt;/group&gt;</span>
        <span class="nt">&lt;/default-grouping&gt;</span>
        <span class="nt">&lt;css-path&gt;</span>forma/css/bis-hoge.css<span class="nt">&lt;/css-path&gt;</span>
    <span class="nt">&lt;/toolkit-setting&gt;</span>
<span class="nt">&lt;/forma-extension-config&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="local-forma-2012-winter-8-0-2">
<span id="update-from-8-0-2"></span><h2><a class="toc-backref" href="#id36">IM-FormaDesigner 2012 Winter(8.0.2) からアップデート</a><a class="headerlink" href="#local-forma-2012-winter-8-0-2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="local-forma">
<h3><a class="toc-backref" href="#id37">IM-FormaDesigner で作成したコンテンツ定義の操作（スマートフォン版）</a><a class="headerlink" href="#local-forma" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><p>スマートフォン版において IM-FormaDesigner で作成したコンテンツ定義に関しても、以下の操作が行えるように対応します。</p>
<ul class="simple">
<li>申請</li>
<li>一時保存</li>
<li>処理（「承認」等）</li>
<li>再申請</li>
<li>確認</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">注意</p>
<div class="last line-block">
<div class="line">既に作成済みコンテンツ定義については、別途スマートフォン用の処理画面を設定する必要があります。</div>
<div class="line">詳細については「<a class="reference external" href="http://www.intra-mart.jp/document/library/forma/public/forma_appli_maker_guide/index.html">IM-FormaDesigner 作成者操作ガイド</a>」→  IM-FormaDesigner  での IM-Workflow から利用できるアプリケーションの作成 → WF連携設定を行う → 「 IM-FormaDesigner  2013 Springより前のバージョンで作成したアプリケーションをスマートフォンで利用する」を参照してください。</div>
</div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="local-forma-2013-spring-8-0-3">
<span id="update-from-8-0-3"></span><h2><a class="toc-backref" href="#id38">IM-FormaDesigner 2013 Spring(8.0.3) からアップデート</a><a class="headerlink" href="#local-forma-2013-spring-8-0-3" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="pdfurl">
<h3><a class="toc-backref" href="#id39">PDF出力用のリクエスト先サーバのベースURLの設定</a><a class="headerlink" href="#pdfurl" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">PDF出力用のリクエスト先サーバのベースURLの設定項目を下記設定ファイルに追加します。</div>
<div class="line">下記設定は、wkhtmltopdfツールからのPDF出力画面要求（リクエスト）時に利用されます。</div>
</div>
<ul>
<li><p class="first">設定ファイル</p>
<p>&lt;conf/forma-pdf-config.xml&gt;</p>
<div class="admonition note">
<p class="first admonition-title">コラム</p>
<p class="last">上記のファイルは、IM-Jugglingで編集可能なファイルです。</p>
</div>
</li>
<li><p class="first">設定項目（任意）</p>
<p>&lt;forma-pdf-config/base-url&gt;</p>
</li>
<li><p class="first">設定値</p>
<div class="line-block">
<div class="line">各APサーバ上のwkhtmltopdfツールからアクセス可能なhttpまたはhttpsプロトコルのコンテキストパスまでのベースURLを設定してください。</div>
<div class="line">例：<strong>http://127.0.0.1:8080/imart</strong></div>
</div>
<blockquote>
<div><div class="admonition warning">
<p class="first admonition-title">注意</p>
<p class="last">APサーバにResinを利用している場合は、ResinのHTTPサーバにアクセス可能なベースURLを指定します。</p>
</div>
</div></blockquote>
</li>
</ul>
<div class="line-block">
<div class="line">上記設定が空の場合、PDF出力リクエスト先サーバのベースURLは、これまで通り、下記設定値が利用されます。</div>
</div>
<ul>
<li><p class="first">設定ファイル</p>
<p>&lt;conf/server-context-config.xml&gt;</p>
</li>
<li><p class="first">設定項目</p>
<p>&lt;server-context-config/base-url&gt;</p>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">注意</p>
<p class="last">ロードバランサにて負荷分散している環境や統合Windows認証を利用している環境においては、forma-pdf-config.xmlのbase-urlのホストには、ローカルホストを指定してください。</p>
</div>
<div class="line-block">
<div class="line">PDF出力機能では、各APサーバ上にインストールされたwkhtmltopdfツールを利用して、PDF出力を行っています。</div>
<div class="line">wkhtmltopdfツールは、コマンドに指定したURLで応答されるHTMLページをレンダリングしてそのページをPDFファイルとして出力できるツールです。</div>
<div class="line">IM-FormaDesignerでは、ユーザからのPDF出力要求（リクエスト）に対して、APサーバ上で要求されたアプリケーションの参照画面用のURLをwkhtmltopdfコマンドの引数に指定して実行し、出力されたPDFファイルを応答しています。</div>
<div class="line"><br /></div>
<div class="line">このように、ユーザからのPDF出力要求（リクエスト）とwkhtmltopdfツールからのPDF出力画面要求（リクエスト）は異なるリクエストです。</div>
<div class="line">APサーバではユーザからのPDF出力要求（リクエスト）とwkhtmltopdfツールからのPDF出力画面要求（リクエスト）を同じログインユーザ（HTTPセッション）で処理させる必要があります。</div>
<div class="line">しかし、wkhtmltopdfツールからのPDF出力画面要求（リクエスト）を受け付けたAPサーバにはそのHTTPセッション情報が解決できない場合、PDF出力に失敗します。</div>
<div class="line">また、PDF出力画面要求（リクエスト）が統合Windows認証サーバを経由してしまうと、未認証として扱われてしまい、PDF出力に失敗します。</div>
<div class="line">forma-pdf-config.xmlのbase-urlのホストにローカルホストを指定することで、ユーザからのPDF出力要求（リクエスト）とwkhtmltopdfツールからのPDF出力画面要求（リクエスト）が同じAPサーバにて処理されるようになり、HTTPセッションが解決できない問題や未認証でPDF出力に失敗する事象を回避できます。</div>
</div>
</div></blockquote>
</div>
<div class="section" id="wf">
<h3><a class="toc-backref" href="#id40">WF申請書再利用画面用のリソースグループの設定</a><a class="headerlink" href="#wf" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">WF申請書再利用画面用のリソースグループを追加します。</div>
<div class="line">WF申請書再利用画面のリソースグループにFormaアプリ作成が割り当てられており、Formaアプリ作成者のロールを持っていないと画面を利用することができない設定になっているため、リソースグループを追加して申請書再利用画面の権限を単独で割り当てられるようにします。</div>
</div>
<blockquote>
<div><ol class="arabic">
<li><p class="first">メニューの「テナント管理」 → 「認可」をクリックします。</p>
</li>
<li><p class="first">「権限設定を開始する」ボタンをクリックします。</p>
</li>
<li><p class="first">「Forma」の <a class="reference internal" href="../../../_images/property.png"><img alt="property" src="../../../_images/property.png" style="width: 21.0px; height: 19.0px;" /></a> をクリックします。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/WFreuse_1.png"><img alt="../../../_images/WFreuse_1.png" src="../../../_images/WFreuse_1.png" style="width: 795.2px; height: 490.4px;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">「Formaユーザ」の <a class="reference internal" href="../../../_images/property.png"><img alt="property" src="../../../_images/property.png" style="width: 21.0px; height: 19.0px;" /></a> をクリックします。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/WFreuse_2.png"><img alt="../../../_images/WFreuse_2.png" src="../../../_images/WFreuse_2.png" style="width: 560.8px; height: 376.0px;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">「配下にリソースを新規作成」をクリックします。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/WFreuse_3.png"><img alt="../../../_images/WFreuse_3.png" src="../../../_images/WFreuse_3.png" style="width: 560.0px; height: 375.2px;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">「リソースグループID」「リソースグループ名」「リソースURI」を入力し、「OK」をクリックします。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/WFreuse_4.png"><img alt="../../../_images/WFreuse_4.png" src="../../../_images/WFreuse_4.png" style="width: 721.6px; height: 459.2px;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">「Formaユーザ」の配下に「WF申請書再利用」のリソースグループが作成されました。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/WFreuse_5.png"><img alt="../../../_images/WFreuse_5.png" src="../../../_images/WFreuse_5.png" style="width: 558.4px; height: 376.8px;" /></a>
</div>
</div></blockquote>
</li>
<li><div class="first line-block">
<div class="line">「権限設定を終了する」をクリックします。</div>
<div class="line">これで、WF申請書再利用画面用のリソースグループを追加できました。</div>
</div>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/WFreuse_6.png"><img alt="../../../_images/WFreuse_6.png" src="../../../_images/WFreuse_6.png" style="width: 795.2px; height: 491.2px;" /></a>
</div>
</div></blockquote>
</li>
</ol>
</div></blockquote>
<div class="line-block">
<div class="line">ユーザに権限を付与するための設定方法は、以下を参照してください。</div>
<div class="line">「IM-FormaDesigner 作成者操作ガイド → ワークフローの申請書を再利用する → WF申請書再利用の利用権限を付与するための手順」</div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="local-forma-2013-summer-8-0-4">
<span id="update-from-8-0-4"></span><h2><a class="toc-backref" href="#id41">IM-FormaDesigner 2013 Summer(8.0.4) からアップデート</a><a class="headerlink" href="#local-forma-2013-summer-8-0-4" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="auto-no-setting">
<h3><a class="toc-backref" href="#id42">採番処理時のリトライ回数（auto-no-setting）を設定する</a><a class="headerlink" href="#auto-no-setting" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><p>ここでは複数のプロセスで採番処理が同時実行された際に、ユニークな番号を取得できるまで繰り返し処理をする回数を指定します。</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">「ProjectNavigator」内の「 &lt;（プロジェクト名）/conf/forma-config.xml&gt; ファイル」をダブルクリックで開き、「ソース」を選択してください。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_11.png"><img alt="../../../_images/forma_config_11.png" src="../../../_images/forma_config_11.png" style="width: 851.2px; height: 516.6px;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">以下の内容を追加します。</p>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;auto-no-setting&gt;</span>
    <span class="nt">&lt;retry-max&gt;</span>15<span class="nt">&lt;/retry-max&gt;</span>
<span class="nt">&lt;/auto-no-setting&gt;</span>
</pre></div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_4.png"><img alt="../../../_images/forma_config_4.png" src="../../../_images/forma_config_4.png" style="width: 562.8px; height: 457.8px;" /></a>
</div>
<div class="admonition note">
<p class="first admonition-title">コラム</p>
<p class="last">採番処理リトライ回数を設定しなかった場合は、初期値10が適用されます。</p>
</div>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="pdfwkhtmltopdf">
<h3><a class="toc-backref" href="#id43">PDF出力時の「wkhtmltopdf」オプションを設定する</a><a class="headerlink" href="#pdfwkhtmltopdf" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><p>以下のタグを記述することで、PDF出力時のパラメータを設定することができます。</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">タグ</th>
<th class="head">説明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&lt;value-string&gt;</td>
<td>文字列用のタグです。</td>
</tr>
<tr class="row-odd"><td>&lt;value-int&gt;</td>
<td>数値用のタグです。</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line">以下は、PDF出力時のパラメータ設定の記述例です。</div>
<div class="line">valueタグはoptionによっては複数設定することができます。</div>
<div class="line">以下は記述例です。</div>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;forma-pdf-config</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.intra-mart.jp/forma-pdf-config&quot;</span>
    <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.intra-mart.jp/forma/forma-config ../../schema/forma-pdf-config.xsd&quot;</span><span class="nt">&gt;</span>
     <span class="nt">&lt;options&gt;</span>
         <span class="nt">&lt;option&gt;</span>
             <span class="nt">&lt;key&gt;</span>zoom<span class="nt">&lt;/key&gt;</span>
             <span class="nt">&lt;value-int&gt;</span>200<span class="nt">&lt;/value-int&gt;</span>
         <span class="nt">&lt;/option&gt;</span>
         <span class="nt">&lt;option&gt;</span>
             <span class="nt">&lt;key&gt;</span>custom-header<span class="nt">&lt;/key&gt;</span>
             <span class="nt">&lt;value-string&gt;</span>name<span class="nt">&lt;/value-string&gt;</span>
             <span class="nt">&lt;value-string&gt;</span>value<span class="nt">&lt;/value-string&gt;</span>
         <span class="nt">&lt;/option&gt;</span>
         <span class="nt">&lt;option&gt;</span>
             <span class="nt">&lt;key&gt;</span>crop-h<span class="nt">&lt;/key&gt;</span>
             <span class="nt">&lt;value-int&gt;</span>1<span class="nt">&lt;/value-int&gt;</span>
         <span class="nt">&lt;/option&gt;</span>
         <span class="nt">&lt;option&gt;</span>
             <span class="nt">&lt;key&gt;</span>no-custom-header-<span class="nt">&lt;/key&gt;</span>
         <span class="nt">&lt;/option&gt;</span>
     <span class="nt">&lt;/options&gt;</span>
<span class="nt">&lt;/forma-pdf-config&gt;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">注意</p>
<p>2013Summer(8.0.4) 以前と同じようにPDF出力する場合は、以下のオプションを設定する必要があります。</p>
<blockquote class="last">
<div><div class="highlight-none"><div class="highlight"><pre>&lt;option&gt;
 &lt;!-- リンク無効 --&gt;
 &lt;key&gt;disable-external-links&lt;/key&gt;
&lt;/option&gt;
&lt;option&gt;
  &lt;!-- 印刷モード(ボタン等非表示にする) --&gt;
  &lt;key&gt;print-media-type&lt;/key&gt;
&lt;/option&gt;
</pre></div>
</div>
</div></blockquote>
</div>
<div class="admonition note">
<p class="first admonition-title">コラム</p>
<div class="line-block">
<div class="line">PDF出力の詳細については以下を参照してください。</div>
<div class="line">「 <a class="reference external" href="http://www.intra-mart.jp/document/library/forma/public/forma_appli_maker_guide/index.html">IM-FormaDesigner 作成者操作ガイド</a> 」→「IM-FormaDesigner でのWebアプリケーションの作成」または「IM-FormaDesigner での IM-Workflow から利用できるアプリケーションの作成」→「その他用途別機能」→「フォームをPDFに出力する」</div>
<div class="line"><br /></div>
<div class="line">その他利用可能なオプションについては、helpコマンドを参照してください。</div>
<div class="line"><br /></div>
<div class="line"><strong>helpコマンド</strong></div>
</div>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>$ wkhtmltopdf -H
</pre></div>
</div>
</div></blockquote>
<p class="last">wkhtmltopdfのバージョンにより使用可能なオプションは異なります。</p>
</div>
</div></blockquote>
</div>
<div class="section" id="numbering-item-update">
<span id="id5"></span><h3><a class="toc-backref" href="#id44">採番アイテム拡張に伴うテーブルデータの更新</a><a class="headerlink" href="#numbering-item-update" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">IM-FormaDesigner 2013 Winterアップデートから、採番ルール定義機能の番号接頭語の種別に、日付形式、プログラムが選択できるようになりました。</div>
<div class="line">IM-FormaDesigner 2013 Winter以前のバージョンにて作成されたデータにつきましては、これらの追加された番号接頭語の種別のデータが存在しないため、下記の手順でテーブルのデータを更新します。</div>
</div>
<blockquote>
<div><ol class="arabic">
<li><p class="first">システム管理者としてログインします。</p>
</li>
<li><p class="first">メニューの「データベース操作」をクリックします。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_804_sql_1.png"><img alt="../../../_images/forma_804_sql_1.png" src="../../../_images/forma_804_sql_1.png" style="width: 696.5px; height: 466.2px;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">利用中のテナントデータベースに、以下のSQLを記述して実行します。</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>update imfr_m_auto_no set no_prefix_type = 0;
</pre></div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_804_sql_2.png"><img alt="../../../_images/forma_804_sql_2.png" src="../../../_images/forma_804_sql_2.png" style="width: 697.9px; height: 466.2px;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">実行後、下記の通りに表示されれば更新完了です。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_804_sql_3.png"><img alt="../../../_images/forma_804_sql_3.png" src="../../../_images/forma_804_sql_3.png" style="width: 698.6px; height: 307.3px;" /></a>
</div>
</div></blockquote>
</li>
</ol>
<div class="admonition warning">
<p class="first admonition-title">注意</p>
<div class="last line-block">
<div class="line">本手順は、 IM-FormaDesigner のアップデートを行って運用を開始した後の環境には行わないようにしてください。</div>
<div class="line">運用開始後の環境で行った場合、データの不整合が発生する可能性があります。</div>
</div>
</div>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="numbering-data-update">
<span id="id6"></span><h3><a class="toc-backref" href="#id45">採番アイテムの排他制御仕様変更に伴うテーブルデータの更新</a><a class="headerlink" href="#numbering-data-update" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">IM-FormaDesigner 2013 Winterアップデートから、採番アイテムの排他制御仕様変更に伴い、採番値を取得するタイミングが下記の通り、変更となりました。</div>
</div>
<blockquote>
<div><ul>
<li><p class="first">変更前</p>
<div class="line-block">
<div class="line">採番ルール定義上の現在値をフォームの入力値として取得し、取得後採番ルール定義の値を更新します。</div>
</div>
</li>
<li><p class="first">変更後</p>
<div class="line-block">
<div class="line">採番ルール定義を更新し、更新値をフォームの入力値として取得します。</div>
</div>
</li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line">上記の変更のため、 IM-FormaDesigner 2013 Winter以前のバージョンにて作成されたデータにつきましては、最新の採番値が申請書の入力データとして利用されず欠番となってしまいます。</div>
<div class="line">欠番の発生を回避するためには、採番ルール定義の最新の採番値を繰り下げるための下記の対応を実施します。</div>
</div>
<blockquote>
<div><ol class="arabic">
<li><p class="first">システム管理者としてログインします。</p>
</li>
<li><p class="first">メニューの「データベース操作」をクリックします。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_804_data_1.png"><img alt="../../../_images/forma_804_data_1.png" src="../../../_images/forma_804_data_1.png" style="width: 696.5px; height: 466.2px;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">利用中のテナントデータベースに、以下のSQLを記述して実行します。</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>update imfr_m_auto_no set auto_no_no = auto_no_no-auto_no_add_val;
</pre></div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_804_data_2.png"><img alt="../../../_images/forma_804_data_2.png" src="../../../_images/forma_804_data_2.png" style="width: 710.5px; height: 432.6px;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">実行後、下記の通りに表示されれば更新完了です。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_804_data_3.png"><img alt="../../../_images/forma_804_data_3.png" src="../../../_images/forma_804_data_3.png" style="width: 710.5px; height: 316.4px;" /></a>
</div>
</div></blockquote>
</li>
</ol>
<div class="admonition warning">
<p class="first admonition-title">注意</p>
<div class="last line-block">
<div class="line">本手順は、 IM-FormaDesigner のアップデートを行って運用を開始した後の環境には行わないようにしてください。</div>
<div class="line">運用開始後の環境で行った場合、データの不整合が発生する可能性があります。</div>
</div>
</div>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id7">
<h3><a class="toc-backref" href="#id46">制限事項</a><a class="headerlink" href="#id7" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><p>2013 Winterへアップデート後は、以下の点に注意してください。</p>
<ul>
<li><div class="first line-block">
<div class="line">アップデート前に作成したフォームを編集する場合、画面アイテムのラベルが折り返し表示されている場合は、プロパティの「折り返し」の設定を確認してください。</div>
<div class="line">「折り返し」の設定については、IM-FormaDesigner for Accel Platform デザイナヘルプを参照してください。</div>
</div>
</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="local-forma-2013-winter-8-0-5">
<span id="update-from-8-0-5"></span><h2><a class="toc-backref" href="#id47">IM-FormaDesigner 2013 Winter(8.0.5) からアップデート</a><a class="headerlink" href="#local-forma-2013-winter-8-0-5" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="windows">
<h3><a class="toc-backref" href="#id48">Windows統合認証環境利用時に認証用ユーザ情報を設定する</a><a class="headerlink" href="#windows" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><p>Windows統合認証環境をご利用の場合はPDF出力時の「wkhtmltopdf」オプションに認証用ユーザ情報を設定してください。</p>
<ul class="simple">
<li>forma-pdf-config.xmlの設定</li>
</ul>
<div class="highlight-none"><div class="highlight"><pre>&lt;options&gt;
   ・・・・・・・・・・・略・・・・・・・・・・・・
   &lt;option&gt;
      &lt;key&gt;username&lt;/key&gt;
      &lt;value-string&gt;%認証ユーザID%&lt;/value-string&gt;
   &lt;/option&gt;
   &lt;option&gt;
      &lt;key&gt;password&lt;/key&gt;
      &lt;value-string&gt;%パスワード%&lt;/value-string&gt;
   &lt;/option&gt;
&lt;/options&gt;
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="local-forma-2014-spring-8-0-6">
<span id="update-from-8-0-6"></span><h2><a class="toc-backref" href="#id49">IM-FormaDesigner 2014 Spring(8.0.6) からアップデート</a><a class="headerlink" href="#local-forma-2014-spring-8-0-6" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="escape-full-width-percent-and-underscore-flag">
<h3><a class="toc-backref" href="#id50">データベース検索時のエスケープフラグ（escape-full-width-percent-and-underscore-flag）を設定する</a><a class="headerlink" href="#escape-full-width-percent-and-underscore-flag" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">データベース検索時に全角「％」（パーセント）、「＿」（アンダースコア）をエスケープするフラグを設定します。</div>
<div class="line">このフラグはデータベースのLIKE検索時に全角「％」（パーセント）、「＿」（アンダースコア）を エスケープして通常の文字として取り扱うフラグです。</div>
<div class="line">全角文字をエスケープするときにエラーとなるデータベースの場合は「false」を設定してください。</div>
<div class="line-block">
<div class="line">true  : エスケープする</div>
<div class="line">false : エスケープしない（初期値）</div>
</div>
</div>
<blockquote>
<div><ol class="arabic">
<li><p class="first">「ProjectNavigator」内の「 &lt;（プロジェクト名）/conf/forma-config.xml&gt; ファイル」をダブルクリックで開き、「ソース」を選択してください。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_11.png"><img alt="../../../_images/forma_config_11.png" src="../../../_images/forma_config_11.png" style="width: 715.4px; height: 508.2px;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">以下の内容を追加します。</p>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;escape-full-width-percent-and-underscore-flag&gt;</span>false<span class="nt">&lt;/escape-full-width-percent-and-underscore-flag&gt;</span>
</pre></div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_5.png"><img alt="../../../_images/forma_config_5.png" src="../../../_images/forma_config_5.png" style="width: 717.5px; height: 509.6px;" /></a>
</div>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="local-forma-2014-winter-8-0-8">
<span id="update-from-8-0-8"></span><h2><a class="toc-backref" href="#id51">IM-FormaDesigner 2014 Winter(8.0.8) からアップデート</a><a class="headerlink" href="#local-forma-2014-winter-8-0-8" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="url">
<h3><a class="toc-backref" href="#id52">セーフURLの設定</a><a class="headerlink" href="#url" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><ul>
<li><div class="first line-block">
<div class="line">2015 Spring(8.0.9)より、IM-FormaDesigner のフォームからの遷移先 URL に対して、「セーフURLリスト」との照合を行い、許可された URL へのみ遷移を可能としています。</div>
<div class="line"><br /></div>
<div class="line">IM-FormaDesigner のimfr_callback_pathパラメータを利用して <strong>外部システムに遷移</strong> を行っている場合、遷移先の URL をセーフURLリストに登録してください。</div>
<div class="line"><br /></div>
<div class="line">セーフURLリストに関しての詳細は 「<a class="reference external" href="http://www.intra-mart.jp/document/library/iap/public/operation/tenant_administrator_guide/index.html">テナント管理者操作ガイド</a>」-「<a class="reference external" href="http://www.intra-mart.jp/document/library/iap/public/operation/tenant_administrator_guide/texts/basic_guide/basic_guide_22.html">セーフURLを設定する</a>」 を参照してください。</div>
</div>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id8">
<h3><a class="toc-backref" href="#id53">forma-configの設定追加（画面アイテム「リッチテキストボックス」）</a><a class="headerlink" href="#id8" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">2015 Spring(8.0.9)より画面アイテム「リッチテキストボックス」が追加となったため、forma-configに設定を追加します。</div>
</div>
<blockquote>
<div><ol class="arabic">
<li><p class="first">「ProjectNavigator」内の「 &lt;（プロジェクト名）/conf/forma-config.xml&gt; ファイル」をダブルクリックで開き、「ソース」を選択してください。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_11.png"><img alt="../../../_images/forma_config_11.png" src="../../../_images/forma_config_11.png" style="width: 851.2px; height: 516.6px;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">以下の内容を追加します。</p>
<blockquote>
<div><ul>
<li><p class="first">一覧表示設定項目の対象外の設定</p>
<blockquote>
<div><div class="line-block">
<div class="line">リッチテキストボックスは、「一覧表示設定項目」の対象外となるため、&lt;item-setting&gt;に以下のように設定を追加してください。</div>
</div>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;item-setting&gt;</span>
   ・・・
      <span class="nt">&lt;exclude-itemselect&gt;</span>product_80_richtextbox<span class="nt">&lt;/exclude-itemselect&gt;</span>
<span class="nt">&lt;/item-setting&gt;</span>
</pre></div>
</div>
</div></blockquote>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_808_1.png"><img alt="../../../_images/forma_config_808_1.png" src="../../../_images/forma_config_808_1.png" style="width: 560.7px; height: 621.6px;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">ツールキットへの設定</p>
<blockquote>
<div><div class="line-block">
<div class="line">リッチテキストボックスをツールキットから利用できるようにするために、以下のように設定を追加してください。</div>
</div>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;toolkit-setting&gt;</span>
   <span class="nt">&lt;define-item&gt;</span>
      ・・・
      <span class="nt">&lt;item-path&gt;</span>forma/designer/types/product/80/richtextbox<span class="nt">&lt;/item-path&gt;</span>
   <span class="nt">&lt;/define-item&gt;</span>
      ・・・
   <span class="nt">&lt;default-grouping&gt;</span>
      <span class="nt">&lt;group&gt;</span>
         <span class="nt">&lt;group-id&gt;</span>input<span class="nt">&lt;/group-id&gt;</span>
            ・・・
         <span class="nt">&lt;item-id&gt;</span>product_80_richtextbox<span class="nt">&lt;/item-id&gt;</span>
      <span class="nt">&lt;/group&gt;</span>
<span class="nt">&lt;/toolkit-setting&gt;</span>
</pre></div>
</div>
</div></blockquote>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_808_2.png"><img alt="../../../_images/forma_config_808_2.png" src="../../../_images/forma_config_808_2.png" style="width: 560.7px; height: 621.6px;" /></a>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id9">
<h3><a class="toc-backref" href="#id54">forma-configの設定追加（データ型「バイナリ」の追加）</a><a class="headerlink" href="#id9" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">2015 Spring(8.0.9)よりデータベースのデータ型に「バイナリ」の設定が追加になりましたので、以下のように設定を追加してください。</div>
<div class="line">ご利用のデータベースに合わせて設定値が異なりますので、詳細は「 <a class="reference internal" href="../forma_config.html#forma-datatype-list"><em>データベースごとのテーブルのデータ型の設定値一覧</em></a> 」を参照してください。</div>
</div>
<blockquote>
<div><ol class="arabic">
<li><p class="first">「ProjectNavigator」内の「 &lt;（プロジェクト名）/conf/forma-config.xml&gt; ファイル」をダブルクリックで開き、「ソース」を選択してください。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_11.png"><img alt="../../../_images/forma_config_11.png" src="../../../_images/forma_config_11.png" style="width: 851.2px; height: 516.6px;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">以下の内容を追加します。</p>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;table-setting&gt;</span>
   ・・・
   <span class="c">&lt;!-- データ型 バイナリ --&gt;</span>
     <span class="nt">&lt;data_type_binary&gt;</span>bytea<span class="nt">&lt;/data_type_binary&gt;</span>
   ・・・
<span class="nt">&lt;/table-setting&gt;</span>
</pre></div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_808_3.png"><img alt="../../../_images/forma_config_808_3.png" src="../../../_images/forma_config_808_3.png" style="width: 560.7px; height: 409.5px;" /></a>
</div>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="template-html">
<h3><a class="toc-backref" href="#id55">template.htmlの更新</a><a class="headerlink" href="#template-html" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">2015 Spring(8.0.9)より「フォーム遷移」の遷移方法に「タブ切替」が追加になったため、template.htmlを更新しました。</div>
<div class="line">template.htmlに対するカスタマイズを行っていた場合には、テナント環境セットアップ後にアップデート前のバージョンのファイルからカスタマイズ内容をマージしてください。</div>
</div>
<div class="line-block">
<div class="line">変更内容を反映するために、マージが終わったらサーバの再起動、または「HTMLテンプレートキャッシュ削除」ジョブを実行してください。</div>
</div>
<blockquote>
<div><ul>
<li><p class="first">アップデート前のバージョンのtemplate.htmlの格納先</p>
<blockquote>
<div><blockquote>
<div><div class="line-block">
<div class="line">アップデート前の「template.html」は下記のフォルダにコピーされています。</div>
</div>
</div></blockquote>
<div class="highlight-none"><div class="highlight"><pre>%PUBLIC_STORAGE_PATH%/forma/html_template_backup/patch09/template.html
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">最新バージョンのtemplate.htmlの格納先</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>%PUBLIC_STORAGE_PATH%/forma/html_template/template.html
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="pdf">
<h3><a class="toc-backref" href="#id56">PDF出力機能改善モジュールの差替え</a><a class="headerlink" href="#pdf" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">2015 Spring(8.0.9)以降の環境では、下記の2つの条件を満たす場合は、PDF出力機能改善モジュールを差替える必要があります。</div>
</div>
<blockquote>
<div><ul class="simple">
<li>Linux版のwkhtmltopdfを利用している場合</li>
<li>2015/07/07以前にFAQの改善モジュールを利用した環境構築を実施している場合</li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line">2015/07/07以前に公開していたFAQの改善モジュールでは、wkhtmltopdfからPOSTパラメータを利用することで、iAP にwkhtmltopdfからのリクエストであることを判別していました。</div>
<div class="line">しかし、Linux版のwkhtmltopdfには、一定数の連続したリクエスト送信時に途中からPOSTパラメータを送信しなくなるという不具合があります。</div>
<div class="line">2015 Spring(8.0.9)以降の環境では、画面を表示するための静的ファイルの取得リクエスト、Ajax通信の回数が増え、本不具合に該当してしまいます。</div>
<div class="line">2015/07/08に公開されたFAQの改善モジュールでは、本不具合の影響を受けないようにCookieを利用して、iAP にwkhtmltopdfからのリクエストであることを判別させています。</div>
</div>
<div class="line-block">
<div class="line">改善モジュールは、下記にて公開しています。</div>
</div>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://imfaq.intra-mart.jp/imqa/faq/detail.asp?Option=&amp;NodeID=&amp;DispNodeID=&amp;CID=&amp;Text=&amp;Field=&amp;KW=&amp;KWAnd=&amp;Attrs=&amp;Bind=&amp;SearchID=&amp;FAQID=491&amp;baID=22&amp;strKind=2">FAQ詳細ページ</a></li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="local-forma-2015-spring-8-0-9">
<span id="update-from-8-0-9"></span><h2><a class="toc-backref" href="#id57">IM-FormaDesigner 2015 Spring(8.0.9) からアップデート</a><a class="headerlink" href="#local-forma-2015-spring-8-0-9" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id10">
<h3><a class="toc-backref" href="#id58">forma-configの設定追加（スマートフォン表示の設定）</a><a class="headerlink" href="#id10" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">2015 Summer(8.0.10)より「スマートフォン表示」の設定が追加されたため、forma-configに設定を追加します。</div>
</div>
<blockquote>
<div><ol class="arabic">
<li><p class="first">「ProjectNavigator」内の「 &lt;（プロジェクト名）/conf/forma-config.xml&gt; ファイル」をダブルクリックで開き、「ソース」を選択してください。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_810_1.png"><img alt="../../../_images/forma_config_810_1.png" src="../../../_images/forma_config_810_1.png" style="width: 560.7px; height: 455.7px;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">以下の内容を追加します。</p>
<blockquote>
<div><ul>
<li><p class="first">スマートフォン表示設定</p>
<blockquote>
<div><blockquote>
<div><div class="line-block">
<div class="line">スマートフォン表示時に、明細テーブル・グリッドテーブルで1ページあたりに表示する行数を指定します。</div>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- スマートフォン表示設定 --&gt;</span>
<span class="nt">&lt;smartphone-setting&gt;</span>
    <span class="c">&lt;!-- 明細テーブルの1ページに表示する行数 --&gt;</span>
    <span class="nt">&lt;table_page_size&gt;</span>5<span class="nt">&lt;/table_page_size&gt;</span>
    <span class="c">&lt;!-- グリッドテーブルの1ページに表示する行数 --&gt;</span>
    <span class="nt">&lt;gridtable_page_size&gt;</span>5<span class="nt">&lt;/gridtable_page_size&gt;</span>
<span class="nt">&lt;/smartphone-setting&gt;</span>
</pre></div>
</div>
</div></blockquote>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_810_2.png"><img alt="../../../_images/forma_config_810_2.png" src="../../../_images/forma_config_810_2.png" style="width: 560.7px; height: 455.7px;" /></a>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="local-forma-2015-winter-8-0-11">
<span id="update-from-8-0-11"></span><h2><a class="toc-backref" href="#id59">IM-FormaDesigner 2015 Winter(8.0.11) からアップデート</a><a class="headerlink" href="#local-forma-2015-winter-8-0-11" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id11">
<h3><a class="toc-backref" href="#id60">PDF出力機能のベースURL、タイムアウト時間の設定</a><a class="headerlink" href="#id11" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">PDF出力用のリクエスト先サーバのベースURL、タイムアウト時間の設定項目を下記設定ファイルに追加・変更してください。</div>
<div class="line">下記設定は、wkhtmltopdfツールからのPDF出力画面要求（リクエスト）時に利用されます。</div>
<div class="line">ベースURLの設定をコメントアウトの状態でアップデートを行うと、PDF出力に失敗する場合があります。</div>
</div>
<ul>
<li><p class="first">設定ファイル</p>
<p>&lt;conf/forma-pdf-config.xml&gt;</p>
<div class="admonition note">
<p class="first admonition-title">コラム</p>
<p class="last">上記のファイルは、IM-Jugglingで編集可能なファイルです。</p>
</div>
</li>
<li><p class="first">設定項目（必須）</p>
<p>&lt;forma-pdf-config/base-url&gt;</p>
</li>
<li><p class="first">設定値</p>
<div class="line-block">
<div class="line">コメントを解除し、各APサーバ上のwkhtmltopdfツールからアクセス可能なhttpまたはhttpsプロトコルのコンテキストパスまでのベースURLを設定してください。</div>
<div class="line">例：<strong>http://127.0.0.1:8080/imart</strong></div>
</div>
<blockquote>
<div><div class="admonition warning">
<p class="first admonition-title">注意</p>
<p class="last">APサーバにResinを利用している場合は、ResinのHTTPサーバにアクセス可能なベースURLを指定します。</p>
</div>
</div></blockquote>
</li>
<li><p class="first">設定項目（任意）</p>
<p>&lt;forma-pdf-config/process-timeout-time&gt;</p>
</li>
<li><p class="first">設定値</p>
<div class="line-block">
<div class="line">各APサーバ上のwkhtmltopdfプロセスのタイムアウト時間（msec）を設定してください。</div>
<div class="line">未設定、または0が設定されている場合、デフォルト設定として300000が設定されます。</div>
</div>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="template-htmltemplate-sp-html">
<h3><a class="toc-backref" href="#id61">template.html、template_sp.htmlの更新</a><a class="headerlink" href="#template-htmltemplate-sp-html" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">2016 Spring(8.0.12)よりtemplate.html、template_sp.htmlに、imSecureTokenを追加しました。</div>
<div class="line">この手順は、 IM-FormaDesigner の画面から IM-LogicDesigner のREST API等セキュア・トークンによるリクエスト正当性チェックが行われるURLにアクセスする場合に実施してください。</div>
</div>
<div class="line-block">
<div class="line">変更内容を反映するために、修正が終わったらサーバの再起動、または「HTMLテンプレートキャッシュ削除」ジョブを実行してください。</div>
</div>
<blockquote>
<div><ul>
<li><p class="first">template.html、template_sp.htmlの格納先</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>%PUBLIC_STORAGE_PATH%/forma/html_template/
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">セキュアトークンの埋め込み</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>&lt;form name=&quot;imfr_csrf_check&quot;&gt;
    &lt;imart type=&quot;imSecureToken&quot; /&gt;
&lt;/form&gt;
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id12">
<h3><a class="toc-backref" href="#id62">IM-FormaDesigner で作成したコンテンツ定義の操作（アクション処理後のセッション削除処理の追加）</a><a class="headerlink" href="#id12" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">IM-FormaDesigner で作成したコンテンツ定義に関して、コンテンツ定義の申請／承認アクション処理の実行後に、セッション情報を削除するようにしました。</div>
<div class="line">不要になったセッション情報を即時解放することにより、セッションの使用量を削減します。</div>
</div>
<div class="admonition warning">
<p class="first admonition-title">注意</p>
<div class="last line-block">
<div class="line">既に作成済みコンテンツ定義については、別途セッション情報を削除する処理を設定する必要があります。</div>
<div class="line">詳細については「<a class="reference external" href="http://www.intra-mart.jp/document/library/forma/public/forma_appli_maker_guide/index.html">IM-FormaDesigner 作成者操作ガイド</a>」→  IM-FormaDesigner  での IM-Workflow から利用できるアプリケーションの作成 → WF連携設定を行う → 「 IM-FormaDesigner  で作成したアプリケーションに、セッション情報を削除する処理を設定する」を参照してください。</div>
</div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="local-forma-2016-spring-8-0-12">
<span id="update-from-8-0-12"></span><h2><a class="toc-backref" href="#id63">IM-FormaDesigner 2016 Spring(8.0.12) からアップデート</a><a class="headerlink" href="#local-forma-2016-spring-8-0-12" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id13">
<h3><a class="toc-backref" href="#id64">セレクトボックス系アイテムの最大表示項目数の設定</a><a class="headerlink" href="#id13" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">セレクトボックス系アイテム（セレクトボックス、所属組織選択）の表示項目数の最大値を設定できるようになりました。</div>
<div class="line">この設定を行うと、セレクトボックス系アイテムに表示する項目数が設定値を超えた場合には、スクロールバーを表示することができます。</div>
</div>
<div class="line-block">
<div class="line">この設定については任意設定となるため、利用したい場合には、以下の設定を IM-Juggling から追加してください。</div>
</div>
<blockquote>
<div><blockquote>
<div><ul>
<li><p class="first">設定ファイル</p>
<p>&lt;conf/forma-config.xml&gt;</p>
</li>
<li><p class="first">設定項目（任意）</p>
<div class="line-block">
<div class="line">以下は最大表示項目数を10にした場合の例です。</div>
</div>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;forma-config&gt;</span>
  <span class="nt">&lt;item-setting&gt;</span>
     ......
     <span class="nt">&lt;selectbox-item-limit&gt;</span>30<span class="nt">&lt;/selectbox-item-limit&gt;</span>
     <span class="c">&lt;!--  セレクトボックスに表示する項目数 --&gt;</span>
     <span class="nt">&lt;selectbox-item-display-limit&gt;</span>10<span class="nt">&lt;/selectbox-item-display-limit&gt;</span>
     <span class="nt">&lt;exclude-itemselect&gt;</span>product_72_checkbox<span class="nt">&lt;/exclude-itemselect&gt;</span>
     ......
  <span class="nt">&lt;/item-setting&gt;</span>
  ......
<span class="nt">&lt;/forma-config&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">コラム</p>
<div class="line-block">
<div class="line">セレクトボックス系アイテムの最大表示項目数の設定については、以下のドキュメントも合わせて参照してください。</div>
</div>
<blockquote class="last">
<div><ul class="simple">
<li>「 <a class="reference external" href="http://www.intra-mart.jp/document/library/forma/public/forma_appli_maker_guide/index.html">IM-FormaDesigner 作成者操作ガイド</a> 」-「 <a class="reference external" href="http://www.intra-mart.jp/document/library/forma/public/forma_appli_maker_guide/maintain_forma_application/forma_advanced_settings.html">IM-FormaDesigner の高度な設定を行う</a> 」</li>
<li>「 <a class="reference external" href="http://www.intra-mart.jp/document/library/bis/public/bis_specification/index.html">IM-BIS 仕様書</a> 」-「 <a class="reference external" href="http://www.intra-mart.jp/document/library/bis/public/bis_specification/texts/spec/smartphone.html">スマートフォン</a> 」</li>
</ul>
</div></blockquote>
</div>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id14">
<h3><a class="toc-backref" href="#id65">ファイルアップロードの保存先の設定</a><a class="headerlink" href="#id14" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">ファイルアップロードに登録したファイルの保存先を設定できるようになりました。</div>
<div class="line">この設定を行うと、ファイルアップロードに登録したファイル保存先を変更することができます。</div>
</div>
<div class="line-block">
<div class="line">この設定については任意設定となるため、利用したい場合には、以下の設定を IM-Juggling から追加してください。</div>
<div class="line">設定を行わない場合には、ファイルアップロードの保存先はストレージに設定されます。</div>
</div>
<blockquote>
<div><blockquote>
<div><ul>
<li><p class="first">設定ファイル</p>
<p>&lt;conf/forma-config.xml&gt;</p>
</li>
<li><p class="first">設定項目（任意）</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;forma-config&gt;</span>
  ......
  <span class="nt">&lt;external-indicator-flag&gt;</span>false<span class="nt">&lt;/external-indicator-flag&gt;</span>
  <span class="c">&lt;!--  ファイルアップロードの保存先 --&gt;</span>
  <span class="nt">&lt;transaction-file-location&gt;</span>
     <span class="nt">&lt;fileupload&gt;</span>db<span class="nt">&lt;/fileupload&gt;</span>
  <span class="nt">&lt;/transaction-file-location&gt;</span>
  ......
<span class="nt">&lt;/forma-config&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">コラム</p>
<div class="line-block">
<div class="line">運用中にファイルアップロードの保存先をストレージからデータベースに切り替えた場合には、登録済みのファイルをデータベースに移行するジョブを実行してください。</div>
<div class="line">該当のジョブの詳細については、以下のドキュメントを参照してください。</div>
</div>
<ul class="last">
<li><div class="first line-block">
<div class="line">「 <a class="reference external" href="http://www.intra-mart.jp/document/library/forma/public/forma_specification/index.html">IM-FormaDesigner 仕様書</a> 」</div>
<div class="line">-「 <a class="reference external" href="http://www.intra-mart.jp/document/library/forma/public/forma_specification/texts/spec/forma-job-detail-fileuploadtransferfiletodb.html">添付ファイルデータ移行(File-&gt;Database LOB)</a> 」</div>
<div class="line">-「 <a class="reference external" href="http://www.intra-mart.jp/document/library/forma/public/forma_specification/texts/spec/forma-job-detail-fileuploadtransferdbtofile.html">添付ファイルデータ移行(Database LOB-&gt;File)</a> 」</div>
</div>
</li>
</ul>
</div>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="local-forma-2016-winter-8-0-14">
<span id="update-from-8-0-14"></span><h2><a class="toc-backref" href="#id66">IM-FormaDesigner 2016 Winter(8.0.14) からアップデート</a><a class="headerlink" href="#local-forma-2016-winter-8-0-14" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id15">
<h3><a class="toc-backref" href="#id67">共通マスタアイテムのデータサイズの変更</a><a class="headerlink" href="#id15" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">IM-共通マスタで、ユーザコードなどのコード項目の入力チェックの最大値がデータベースと同じ値に変更されました。</div>
<div class="line">この変更により、共通マスタアイテムのカラムサイズを100未満に設定していた場合、設定の見直しを実施してください。</div>
</div>
<blockquote>
<div><ul class="simple">
<li>対象の画面アイテム<ul>
<li>ユーザ選択</li>
<li>組織選択</li>
<li>組織・役職選択</li>
<li>所属組織選択</li>
</ul>
</li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id16">
<h3><a class="toc-backref" href="#id68">template.html、template_sp.htmlの更新</a><a class="headerlink" href="#id16" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">2017 Spring(8.0.15)より下記の不具合対応を行ったため、template.html、template_sp.htmlを更新しました。</div>
<div class="line">この手順は、 IM-FormaDesigner のアプリケーションの登録後に「imfr_callback_path」に遷移先として別のアプリケーションを指定して遷移させる場合に実施してください。</div>
<div class="line">ただし、更新内容記載のタグを利用した処理をユーザプログラム等で実装している場合には更新を行わないようにしてください。</div>
</div>
<blockquote>
<div><ul>
<li><div class="first line-block">
<div class="line">修正 <a class="reference external" href="https://issue.intra-mart.jp/issues/22954">#22954</a> imfr_callback_pathにFormaのアプリ画面を設定できません。</div>
</div>
</li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line">変更内容を反映するために、修正が終わったらサーバの再起動、または「HTMLテンプレートキャッシュ削除」ジョブを実行してください。</div>
</div>
<blockquote>
<div><ul>
<li><p class="first">template.html、template_sp.htmlの格納先</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>%PUBLIC_STORAGE_PATH%/forma/html_template/
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">更新対象</p>
<div class="line-block">
<div class="line">以下のコード中の「削除対象」の範囲2か所を削除して保存してください。</div>
</div>
<ul>
<li><p class="first">template.html</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>&lt;form name=&quot;imfr_next_form&quot; id=&quot;imfr-next-form&quot; action=&quot;&lt;imart type=&quot;string&quot; value=imfrBindData.imfr_success_url escapeJs=&quot;false&quot; escapeXml=&quot;true&quot;/&gt;&quot; method=&quot;post&quot;&gt;

  &lt;!-- 削除対象1 ここから --&gt;
  &lt;imart type=&quot;repeat&quot; list=imfrBindData.imfrSecuredSendData item=&quot;record&quot; index=&quot;idx&quot;&gt;
    &lt;imart type=&quot;secureParameter&quot; name=idx value=record /&gt;
  &lt;/imart&gt;
  &lt;!-- 削除対象1 ここまで --&gt;

  &lt;imart type=&quot;hidden&quot; imfr_view_list=imfrBindData.imfrSendData.imfr_view_list escapeXml=&quot;true&quot; escapeJs=&quot;false&quot;/&gt;

  &lt;!-- 削除対象2 ここから --&gt;
  &lt;input type=&quot;hidden&quot; name=&quot;imfr_callback_path&quot; value=&quot;&quot;&gt;
  &lt;!-- 削除対象2 ここまで --&gt;

  &lt;input type=&quot;hidden&quot; name=&quot;imfr_err_flag&quot; value=&quot;&quot;&gt;
  &lt;input type=&quot;hidden&quot; name=&quot;imfr_message_id&quot; value=&quot;&quot;&gt;
  &lt;input type=&quot;hidden&quot; name=&quot;imfr_message&quot; value=&quot;&quot;&gt;
  &lt;input type=&quot;hidden&quot; name=&quot;imui-message&quot; id=&#39;imui-message&#39; value=&quot;&quot;&gt;
  &lt;input type=&quot;hidden&quot; name=&quot;imfr_message_error_display&quot; id=&#39;imfr_message_error_display&#39; value=&quot;&lt;imart type=&quot;message&quot; id=&quot;MSG.E.FORMA.COMMON.APPLICATION_DISPLAY_ERROR&quot;/&gt;&quot;&gt;
&lt;/form&gt;
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">template_sp.html</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>&lt;form name=&quot;imfr_next_form&quot; id=&quot;imfr-next-form&quot; action=&quot;&lt;imart type=&quot;string&quot; value=imfrBindData.imfr_success_url escapeJs=&quot;false&quot; escapeXml=&quot;true&quot;/&gt;&quot; method=&quot;post&quot;&gt;

  &lt;!--削除対象1 ここから--&gt;
  &lt;imart type=&quot;repeat&quot; list=imfrBindData.imfrSecuredSendData item=&quot;record&quot; index=&quot;idx&quot;&gt;
    &lt;imart type=&quot;secureParameter&quot; name=idx value=record /&gt;
  &lt;/imart&gt;
  &lt;!--削除対象1 ここまで--&gt;

  &lt;imart type=&quot;hidden&quot; imfr_view_list=imfrBindData.imfrSendData.imfr_view_list escapeXml=&quot;true&quot; escapeJs=&quot;false&quot;/&gt;

  &lt;!--削除対象2 ここから--&gt;
  &lt;input type=&quot;hidden&quot; name=&quot;imfr_callback_path&quot; value=&quot;&quot;&gt;
  &lt;!--削除対象2 ここまで--&gt;

  &lt;input type=&quot;hidden&quot; name=&quot;imfr_display_client_type&quot; value=&quot;&lt;imart type=&quot;string&quot; value=imfrBindData.imfrSendData.imfr_display_client_type escapeJs=&quot;false&quot; escapeXml=&quot;true&quot;/&gt;&quot;&gt;
  &lt;input type=&quot;hidden&quot; name=&quot;imfr_err_flag&quot; value=&quot;&quot;&gt;
  &lt;input type=&quot;hidden&quot; name=&quot;imfr_message_id&quot; value=&quot;&quot;&gt;
  &lt;input type=&quot;hidden&quot; name=&quot;imfr_message&quot; value=&quot;&quot;&gt;
  &lt;input type=&quot;hidden&quot; name=&quot;imui-message&quot; id=&#39;imui-message&#39; value=&quot;&quot;&gt;
&lt;/form&gt;
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="local-forma-2017-spring-8-0-15">
<span id="update-from-8-0-15"></span><h2><a class="toc-backref" href="#id69">IM-FormaDesigner 2017 Spring(8.0.15) からアップデート</a><a class="headerlink" href="#local-forma-2017-spring-8-0-15" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="template-tab-html">
<h3><a class="toc-backref" href="#id70">template_tab.htmlの更新</a><a class="headerlink" href="#template-tab-html" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">2017 Summer(8.0.16)より下記の不具合対応を行ったため、template_tab.htmlを更新しました。</div>
</div>
<blockquote>
<div><ul>
<li><div class="first line-block">
<div class="line">修正 <a class="reference external" href="https://issue.intra-mart.jp/issues/25091">#25091</a> ヘッダの戻るリンク押下時に一覧画面に戻らない場合があります。</div>
</div>
</li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line">template_tab.htmlに対するカスタマイズを行っていた場合には、テナント環境セットアップ後にアップデート前のバージョンのファイルからカスタマイズ内容をマージしてください。</div>
<div class="line">変更内容を反映するために、修正が終わったらサーバの再起動、または「HTMLテンプレートキャッシュ削除」ジョブを実行してください。</div>
</div>
<blockquote>
<div><ul>
<li><p class="first">template_tab.htmlの格納先</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>%PUBLIC_STORAGE_PATH%/forma/html_template/
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">更新対象</p>
<div class="line-block">
<div class="line">以下のコード中に「削除」と「追加」の変更を加えて保存してください。</div>
</div>
<ul>
<li><p class="first">template_tab.html</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>(function($) {
  forma.notOpenedTabError = false;
  // 戻る

  &lt;!--削除対象 ここから--&gt;
  $(&#39;.im-ui-icon-common-16-back&#39;).bind(&#39;click&#39;, function(){
  &lt;!--削除対象 ここまで--&gt;

  &lt;!--追加対象 ここから--&gt;
  $(&#39;.imui-toolbar-icon:has(.im-ui-icon-common-16-back)&#39;).unbind(&#39;click&#39;).bind(&#39;click&#39;, function() {
  &lt;!--追加対象 ここまで--&gt;

    sendBack();
    return false;
  });
})(jQuery);
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="forma-config-undoredo">
<h3><a class="toc-backref" href="#id71">forma-configの設定追加（フォーム・デザイナのUndo・Redo機能／リッチテキストボックスの画像挿入機能の利用有無の追加）</a><a class="headerlink" href="#forma-config-undoredo" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">2017 Summer(8.0.16)よりフォーム・デザイナのUndo・Redo機能とリッチテキストボックスの画像挿入機能が追加されたため、forma-configに設定を追加します。</div>
</div>
<blockquote>
<div><ol class="arabic">
<li><p class="first">「ProjectNavigator」内の「 &lt;（プロジェクト名）/conf/forma-config.xml&gt; ファイル」をダブルクリックで開き、「ソース」を選択してください。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_17_1.png"><img alt="../../../_images/forma_config_17_1.png" src="../../../_images/forma_config_17_1.png" style="width: 548.8px; height: 449.4px;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">Undo・Redoの操作記録の上限値を設定します。</p>
<blockquote>
<div><div class="line-block">
<div class="line">Undo・Redoで記録する操作数の上限値を、クライアント環境に合わせて適切な値に設定してください。</div>
<div class="line">Undo・Redoの操作記録の上限値を設定しなかった場合は、Undo・Redo機能の利用ができません。</div>
</div>
<blockquote>
<div><blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;designer-setting&gt;</span>
    <span class="nt">&lt;undo-memory-max-step&gt;</span>100<span class="nt">&lt;/undo-memory-max-step&gt;</span>
<span class="nt">&lt;/designer-setting&gt;</span>
</pre></div>
</div>
</div></blockquote>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_17_2.png"><img alt="../../../_images/forma_config_17_2.png" src="../../../_images/forma_config_17_2.png" style="width: 548.1px; height: 449.4px;" /></a>
</div>
</div></blockquote>
</div></blockquote>
</li>
<li><div class="first line-block">
<div class="line">リッチテキストボックスの画像挿入機能の利用有無を設定します。</div>
<div class="line">&lt;item-setting&gt;の&lt;exclude-itemselect&gt;の下に&lt;richtextbox-use-imui-data-url&gt;を追加してください。</div>
</div>
<blockquote>
<div><div class="line-block">
<div class="line">リッチテキストボックスの画像挿入機能を利用する場合は、trueを設定してください。</div>
</div>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre>  <span class="nt">&lt;item-setting&gt;</span>
      ・・・
      <span class="nt">&lt;richtextbox-use-imui-data-url&gt;</span>true<span class="nt">&lt;/richtextbox-use-imui-data-url&gt;</span>
<span class="hll">  <span class="nt">&lt;/item-setting&gt;</span>
</span></pre></div>
</div>
</div></blockquote>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="local-forma-2017-summer-8-0-16">
<span id="update-from-8-0-16"></span><h2><a class="toc-backref" href="#id72">IM-FormaDesigner 2017 Summer(8.0.16) からアップデート</a><a class="headerlink" href="#local-forma-2017-summer-8-0-16" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id19">
<h3><a class="toc-backref" href="#id73">template.html、template_sp.htmlの更新</a><a class="headerlink" href="#id19" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">2017 Winter(8.0.17)より下記の要件対応を行ったため、template.html、template_sp.htmlを更新しました。</div>
</div>
<blockquote>
<div><ul>
<li><div class="first line-block">
<div class="line">追加 <a class="reference external" href="https://issue.intra-mart.jp/issues/24240">#24240</a> 数値表示の国際化対応を実施します。</div>
</div>
</li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line">テナント環境セットアップ後にtemplate.html、template_sp.htmlを最新バージョンのファイルに置き換えてください。</div>
<div class="line">template.html、template_sp.htmlに対してカスタマイズを行っている場合は、最新バージョンのtemplate.html、template_sp.htmlの変更内容をマージしてください。</div>
<div class="line">変更内容を反映するために、修正が終わったらサーバの再起動、または「HTMLテンプレートキャッシュ削除」ジョブを実行してください。</div>
</div>
<div class="admonition warning">
<p class="first admonition-title">注意</p>
<div class="line-block">
<div class="line">以下のバグのため、2018 Spring(8.0.18)以前のバージョンで出力されるtemplate.html、template_sp.htmlと、このドキュメントに記載のim_decimal_formatterのパスが異なります。</div>
</div>
<ul>
<li><div class="first line-block">
<div class="line">修正 <a class="reference external" href="https://issue.intra-mart.jp/issues/27062">#27062</a> ImDecimalFormatterを使用するために im_decimal_formatter.min.js ではなく、 im_decimal_formatter.js を読み込んでいます。</div>
</div>
</li>
</ul>
<div class="last line-block">
<div class="line">以下に記載の内容が正ですので注意してください。</div>
</div>
</div>
<ul>
<li><p class="first">template.html、template_sp.htmlの格納先</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>%PUBLIC_STORAGE_PATH%/forma/html_template/
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">最新バージョンのtemplate.html、template_sp.htmlの格納先</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>%CONTEXT_PATH%/WEB-INF/storage/public/forma/html_template/
</pre></div>
</div>
<ul>
<li><p class="first">template.html</p>
<div class="line-block">
<div class="line">以下のコード中の「追加対象」の範囲2か所を追加して保存してください。</div>
</div>
<blockquote>
<div><div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;forma/csjs/im_forma_util.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;forma/csjs/im_forma_tabs.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;forma/csjs/jquery.contextmenu.r2.packed.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="c">&lt;!-- 追加対象1 ここから --&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;ui/libs/bigdecimal-js/BigDecimal-all-last.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;ui/js/math/im_decimal.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;im_i18n/number/format/im_decimal_formatter.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;forma/csjs/item/number/format/im_forma_item_decimal_formatter.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="c">&lt;!-- 追加対象1 ここまで --&gt;</span>

......

<span class="nt">&lt;imart</span> <span class="na">type=</span><span class="s">&quot;include&quot;</span> <span class="na">page=</span><span class="s">&quot;forma/designer/event_setting/reference&quot;</span>
  <span class="na">imfr_application_id=</span><span class="s">imfrBindData.imfrSecuredSendData.imfr_application_id</span>
  <span class="na">imfr_form_id=</span><span class="s">imfrBindData.imfrSendData.imfr_form_id</span>
  <span class="na">imfr_application_type=</span><span class="s">imfrBindData.imfrSendData.imfr_application_type</span>
<span class="nt">/&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/imart&gt;</span>
<span class="c">&lt;!-- 追加対象2 ここから --&gt;</span>
<span class="nt">&lt;imart</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">imfrTenantDecimalFormatId=</span><span class="s">imfrBindData.imfr_tenant_decimal_format_id</span> <span class="nt">&gt;&lt;/imart&gt;</span>
<span class="c">&lt;!-- 追加対象2 ここまで --&gt;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">template_sp.html</p>
<div class="line-block">
<div class="line">以下のコード中の「追加対象」の範囲2か所を追加して保存してください。</div>
</div>
<blockquote>
<div><div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;forma/csjs/im_forma_util.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;forma/csjs/im_forma_click.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;forma/csjs/im_forma.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="c">&lt;!-- 追加対象1 ここから --&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;ui/libs/bigdecimal-js/BigDecimal-all-last.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;ui/js/math/im_decimal.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;im_i18n/number/format/im_decimal_formatter.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;forma/csjs/item/number/format/im_forma_item_decimal_formatter.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="c">&lt;!-- 追加対象1 ここまで --&gt;</span>

......

<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">id=</span><span class="s">&quot;imfr-validation-check-error-message&quot;</span>
  <span class="na">value=</span><span class="s">&#39;&lt;imart type=&quot;message&quot; id=&quot;MSG.I.FORMA.ITEM.VALIDATION.MSG.ERROR&quot; /&gt;&#39;</span> <span class="nt">/&gt;</span>
<span class="c">&lt;!-- 追加対象2 ここから --&gt;</span>
<span class="nt">&lt;imart</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">imfrTenantDecimalFormatId=</span><span class="s">imfrBindData.imfr_tenant_decimal_format_id</span> <span class="nt">&gt;&lt;/imart&gt;</span>
<span class="c">&lt;!-- 追加対象2 ここまで --&gt;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="local-forma-2017-winter-8-0-17">
<span id="update-from-8-0-17"></span><h2><a class="toc-backref" href="#id74">IM-FormaDesigner 2017 Winter(8.0.17) からアップデート</a><a class="headerlink" href="#local-forma-2017-winter-8-0-17" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id22">
<h3><a class="toc-backref" href="#id75">forma-configの設定追加（画面アイテム「ボタン(コピー新規)」）</a><a class="headerlink" href="#id22" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">2018 Spring(8.0.18)より画面アイテム「ボタン(コピー新規)」が追加されたため、forma-configに設定を追加します。</div>
</div>
<blockquote>
<div><ol class="arabic">
<li><p class="first">「ProjectNavigator」内の「 &lt;（プロジェクト名）/conf/forma-config.xml&gt; ファイル」をダブルクリックで開き、「ソース」を選択してください。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_817_1.png"><img alt="../../../_images/forma_config_817_1.png" src="../../../_images/forma_config_817_1.png" style="width: 561.4px; height: 561.4px;" /></a>
</div>
</div></blockquote>
</li>
<li><p class="first">以下の内容を追加します。</p>
<blockquote>
<div><ul>
<li><p class="first">ツールキットへの設定</p>
<blockquote>
<div><div class="line-block">
<div class="line">ボタン(コピー新規)をツールキットから利用できるようにするために、以下のように設定を追加してください。</div>
</div>
<ul>
<li><p class="first">IM-FormaDesigner のみを導入している場合</p>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre> <span class="nt">&lt;toolkit-setting&gt;</span>
    <span class="nt">&lt;define-item&gt;</span>
       ・・・
<span class="hll">       <span class="nt">&lt;item-path&gt;</span>forma/designer/types/product/80/recycleButton<span class="nt">&lt;/item-path&gt;</span>
</span>    <span class="nt">&lt;/define-item&gt;</span>
       ・・・
    <span class="nt">&lt;default-grouping&gt;</span>
       <span class="nt">&lt;group&gt;</span>
          <span class="nt">&lt;group-id&gt;</span>button<span class="nt">&lt;/group-id&gt;</span>
             ・・・
<span class="hll">          <span class="nt">&lt;item-id</span> <span class="na">application-type=</span><span class="s">&quot;imw&quot;</span><span class="nt">&gt;</span>product_80_recycleButton<span class="nt">&lt;/item-id&gt;</span>
</span>       <span class="nt">&lt;/group&gt;</span>
 <span class="nt">&lt;/toolkit-setting&gt;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">IM-BIS を導入している場合</p>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre> <span class="nt">&lt;toolkit-setting&gt;</span>
    <span class="nt">&lt;define-item&gt;</span>
       ・・・
<span class="hll">       <span class="nt">&lt;item-path&gt;</span>forma/designer/types/product/80/recycleButton<span class="nt">&lt;/item-path&gt;</span>
</span>    <span class="nt">&lt;/define-item&gt;</span>
       ・・・
    <span class="nt">&lt;default-grouping&gt;</span>
       <span class="nt">&lt;group&gt;</span>
          <span class="nt">&lt;group-id&gt;</span>button<span class="nt">&lt;/group-id&gt;</span>
             ・・・
<span class="hll">          <span class="nt">&lt;item-id</span> <span class="na">application-type=</span><span class="s">&quot;imw,bis_wkf,bis_bf&quot;</span><span class="nt">&gt;</span>product_80_recycleButton<span class="nt">&lt;/item-id&gt;</span>
</span>       <span class="nt">&lt;/group&gt;</span>
 <span class="nt">&lt;/toolkit-setting&gt;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_817_2.png"><img alt="../../../_images/forma_config_817_2.png" src="../../../_images/forma_config_817_2.png" style="width: 561.4px; height: 561.4px;" /></a>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="id23">
<h3><a class="toc-backref" href="#id76">template.html、template_sp.htmlの更新</a><a class="headerlink" href="#id23" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="admonition warning">
<p class="first admonition-title">注意</p>
<div class="line-block">
<div class="line">以下のバグおよびドキュメントのミスのため、template.html、template_sp.htmlに誤ったim_decimal_formatterのパスが記述されている可能性があります。</div>
</div>
<ul>
<li><div class="first line-block">
<div class="line">修正 <a class="reference external" href="https://issue.intra-mart.jp/issues/27062">#27062</a> ImDecimalFormatterを使用するために im_decimal_formatter.min.js ではなく、 im_decimal_formatter.js を読み込んでいます。</div>
</div>
</li>
</ul>
<div class="last line-block">
<div class="line">「 <a class="reference internal" href="#update-from-8-0-16"><em>IM-FormaDesigner 2017 Summer(8.0.16) からアップデート</em></a> 」 を参考にim_decimal_formatterのパスを修正し、変更内容を反映するために、修正が終わったらサーバの再起動、または「HTMLテンプレートキャッシュ削除」ジョブを実行してください。</div>
</div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="local-forma-2018-spring-8-0-18">
<span id="update-from-8-0-18"></span><h2><a class="toc-backref" href="#id77">IM-FormaDesigner 2018 Spring(8.0.18) からアップデート</a><a class="headerlink" href="#local-forma-2018-spring-8-0-18" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id25">
<h3><a class="toc-backref" href="#id78">template.html、template_sp.htmlの更新</a><a class="headerlink" href="#id25" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">2018 Summer(8.0.19)より下記の要件対応を行ったため、template.html、template_sp.htmlを更新しました。</div>
</div>
<blockquote>
<div><ul>
<li><div class="first line-block">
<div class="line">追加 <a class="reference external" href="https://issue.intra-mart.jp/issues/27791">#27791</a> 数値のフォーマット処理を改善します。</div>
</div>
</li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line">テナント環境セットアップ後にtemplate.html、template_sp.htmlを最新バージョンのファイルに置き換えてください。</div>
<div class="line">template.html、template_sp.htmlに対してカスタマイズを行っている場合は、最新バージョンのtemplate.html、template_sp.htmlの変更内容をマージしてください。</div>
<div class="line">変更内容を反映するために、修正が終わったらサーバの再起動、または「HTMLテンプレートキャッシュ削除」ジョブを実行してください。</div>
</div>
<div class="admonition warning">
<p class="first admonition-title">注意</p>
<div class="line-block">
<div class="line">以下のバグおよびドキュメントのミスのため、template.html、template_sp.htmlに誤ったim_decimal_formatterのパスが記述されている可能性があります。</div>
</div>
<ul>
<li><div class="first line-block">
<div class="line">修正 <a class="reference external" href="https://issue.intra-mart.jp/issues/27062">#27062</a> ImDecimalFormatterを使用するために im_decimal_formatter.min.js ではなく、 im_decimal_formatter.js を読み込んでいます。</div>
</div>
</li>
</ul>
<div class="last line-block">
<div class="line">「 <a class="reference internal" href="#update-from-8-0-16"><em>IM-FormaDesigner 2017 Summer(8.0.16) からアップデート</em></a> 」 を参考にim_decimal_formatterのパスを修正し、変更内容を反映するために、修正が終わったらサーバの再起動、または「HTMLテンプレートキャッシュ削除」ジョブを実行してください。</div>
</div>
</div>
<ul>
<li><p class="first">template.html、template_sp.htmlの格納先</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>%PUBLIC_STORAGE_PATH%/forma/html_template/
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">最新バージョンのtemplate.html、template_sp.htmlの格納先</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>%CONTEXT_PATH%/WEB-INF/storage/public/forma/html_template/
</pre></div>
</div>
<ul>
<li><p class="first">template.html</p>
<div class="line-block">
<div class="line">以下のコード中の「追加対象」の範囲を追加して保存してください。</div>
</div>
<blockquote>
<div><div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;forma/csjs/im_forma_util.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;forma/csjs/im_forma_tabs.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;forma/csjs/jquery.contextmenu.r2.packed.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;ui/libs/bigdecimal-js/BigDecimal-all-last.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;ui/js/math/im_decimal.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;im_i18n/number/format/im_decimal_formatter.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;forma/csjs/item/number/format/im_forma_item_decimal_formatter.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="c">&lt;!-- 追加対象 ここから --&gt;</span>
<span class="nt">&lt;imart</span> <span class="na">type=</span><span class="s">&quot;clientDecimalFormatScript&quot;</span> <span class="nt">/&gt;</span>
<span class="c">&lt;!-- 追加対象 ここまで --&gt;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">template_sp.html</p>
<div class="line-block">
<div class="line">以下のコード中の「追加対象」の範囲を追加して保存してください。</div>
</div>
<blockquote>
<div><div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;forma/csjs/im_forma_util.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;forma/csjs/im_forma_click.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;forma/csjs/im_forma.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;ui/libs/bigdecimal-js/BigDecimal-all-last.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;ui/js/math/im_decimal.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;im_i18n/number/format/im_decimal_formatter.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;forma/csjs/item/number/format/im_forma_item_decimal_formatter.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="c">&lt;!-- 追加対象 ここから --&gt;</span>
<span class="nt">&lt;imart</span> <span class="na">type=</span><span class="s">&quot;clientDecimalFormatScript&quot;</span> <span class="nt">/&gt;</span>
<span class="c">&lt;!-- 追加対象 ここまで --&gt;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="local-forma-2018-summer-8-0-19">
<span id="update-from-8-0-19"></span><h2><a class="toc-backref" href="#id79">IM-FormaDesigner 2018 Summer(8.0.19) からアップデート</a><a class="headerlink" href="#local-forma-2018-summer-8-0-19" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="forma-config-iap-ui">
<h3><a class="toc-backref" href="#id80">forma-configの設定追加（フォーム・デザイナのiAP UIデザインモードの追加）</a><a class="headerlink" href="#forma-config-iap-ui" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">2018 Winter(8.0.19)よりフォーム・デザイナのiAP UIデザインモードが追加されたため、forma-configに設定を追加します。</div>
</div>
<blockquote>
<div><ol class="arabic">
<li><p class="first">「ProjectNavigator」内の「 &lt;（プロジェクト名）/conf/forma-config.xml&gt; ファイル」をダブルクリックで開き、「ソース」を選択してください。</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_819_1.png"><img alt="../../../_images/forma_config_819_1.png" src="../../../_images/forma_config_819_1.png" style="width: 550.2px; height: 450.1px;" /></a>
</div>
</div></blockquote>
</li>
<li><div class="first line-block">
<div class="line">iAP UIデザインモードの初期状態を設定します。</div>
<div class="line">&lt;item-setting&gt;の&lt;richtextbox-use-imui-data-url&gt;の下に&lt;ui-theme-mode&gt;を追加してください。</div>
</div>
<blockquote>
<div><div class="line-block">
<div class="line">設定は任意です。設定されていない場合には、デフォルトのデザインで画面アイテムが表示されます。</div>
<div class="line">「iap」とした場合、iAP UIデザインガイドラインに沿った表示モードで画面アイテムが表示されます。</div>
</div>
<blockquote>
<div><blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre>  <span class="nt">&lt;item-setting&gt;</span>
      ・・・
<span class="hll">      <span class="nt">&lt;ui-theme-mode&gt;</span>iap<span class="nt">&lt;/ui-theme-mode&gt;</span>
</span>  <span class="nt">&lt;/item-setting&gt;</span>
</pre></div>
</div>
</div></blockquote>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/forma_config_819_2.png"><img alt="../../../_images/forma_config_819_2.png" src="../../../_images/forma_config_819_2.png" style="width: 550.2px; height: 450.1px;" /></a>
</div>
</div></blockquote>
</div></blockquote>
</li>
</ol>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="local-forma-2019-winter-8-0-23">
<span id="update-from-8-0-23"></span><h2><a class="toc-backref" href="#id81">IM-FormaDesigner 2019 Winter(8.0.23) からアップデート</a><a class="headerlink" href="#local-forma-2019-winter-8-0-23" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="template-sp-html">
<h3><a class="toc-backref" href="#id82">template_sp.htmlの更新</a><a class="headerlink" href="#template-sp-html" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">2018 Winter(8.0.20)にて下記の要件対応で、template_sp.htmlを更新しました。</div>
<div class="line">しかし、iOS12最新バージョン、iPadOS13では、該当事象の解消を確認したため、不要となった処理を削除します。</div>
</div>
<blockquote>
<div><ul>
<li><div class="first line-block">
<div class="line">追加 <a class="reference external" href="https://issue.intra-mart.jp/issues/29306">#27791</a> ショートカットアクセスURLから承認画面にアクセスした場合、403エラーが発生する場合があります。</div>
</div>
</li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line">テナント環境セットアップ後にtemplate_sp.htmlを最新バージョンのファイルに置き換えてください。</div>
<div class="line">template_sp.htmlに対してカスタマイズを行っている場合は、最新バージョンのtemplate_sp.htmlの変更内容をマージしてください。</div>
<div class="line">変更内容を反映するために、修正が終わったらサーバの再起動、または「HTMLテンプレートキャッシュ削除」ジョブを実行してください。</div>
</div>
<ul>
<li><p class="first">template_sp.htmlの格納先</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>%PUBLIC_STORAGE_PATH%/forma/html_template/
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">最新バージョンのtemplate_sp.htmlの格納先</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>%CONTEXT_PATH%/WEB-INF/storage/public/forma/html_template/
</pre></div>
</div>
<ul>
<li><p class="first">template_sp.html</p>
<div class="line-block">
<div class="line">以下のコード中の「削除対象」の範囲を削除して保存してください。</div>
</div>
<blockquote>
<div><div class="highlight-html"><div class="highlight"><pre><span class="c">&lt;!-- IM JS Start --&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;csjs/im_window.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;csjs/im_json.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;csjs/im_date.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;csjs/im_code_point_util.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="c">&lt;!-- IM JS End --&gt;</span>
<span class="c">&lt;!-- IM Master JS Start--&gt;</span>
<span class="nt">&lt;imart</span> <span class="na">type=</span><span class="s">&quot;condition&quot;</span> <span class="na">validity=</span><span class="s">imfrBindData.isImMasterLoad</span><span class="nt">&gt;</span>
<span class="nt">&lt;imart</span> <span class="na">type=</span><span class="s">&quot;imACMSearchSp&quot;</span><span class="nt">&gt;&lt;/imart&gt;</span>
<span class="nt">&lt;/imart&gt;</span>
<span class="c">&lt;!-- IM Master JS End--&gt;</span>
<span class="c">&lt;!-- IM WF JS Start --&gt;</span>
<span class="nt">&lt;imart</span>  <span class="na">type=</span><span class="s">&quot;decision&quot;</span> <span class="na">case=</span><span class="s">imfrBindData.imfrSendData.imfr_run_apptype</span> <span class="na">value=</span><span class="s">&quot;IMW&quot;</span> <span class="nt">&gt;</span>
<span class="nt">&lt;imart</span> <span class="na">type=</span><span class="s">&quot;spWorkflowOpenPageCsjs&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/imart&gt;</span>
<span class="c">&lt;!-- IM WF JS End --&gt;</span>
<span class="c">&lt;!-- 削除対象 ここから --&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">history</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">pushState</span> <span class="p">){</span>
      <span class="nx">history</span><span class="p">.</span><span class="nx">pushState</span><span class="p">(</span> <span class="s2">&quot;nohb&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">})(</span><span class="nx">jQuery</span><span class="p">);</span>
<span class="nt">&lt;/script&gt;</span>
<span class="c">&lt;!-- 削除対象 ここまで --&gt;</span>
<span class="nt">&lt;/imart&gt;</span>
<span class="c">&lt;!-- HEAD End --&gt;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="local-forma-2020-summer-8-0-25">
<span id="update-from-8-0-25"></span><h2><a class="toc-backref" href="#id83">IM-FormaDesigner 2020 Summer(8.0.25) からアップデート</a><a class="headerlink" href="#local-forma-2020-summer-8-0-25" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="id29">
<h3><a class="toc-backref" href="#id84">template.htmlの更新</a><a class="headerlink" href="#id29" title="このヘッドラインへのパーマリンク">¶</a></h3>
<blockquote>
<div><div class="line-block">
<div class="line">2020 Winter(8.0.26)にて下記の要件対応で、template.htmlを更新しました。</div>
</div>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="https://issue.intra-mart.jp/issues/22318">#22318</a> アプリケーション種別「 IM-Workflow 」で「連続処理」時に「連続処理」エリア表示に対応します。</li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line">テナント環境セットアップ後にtemplate.htmlを最新バージョンのファイルに置き換えてください。</div>
<div class="line">template.htmlに対してカスタマイズを行っている場合は、最新バージョンのtemplate.htmlの変更内容をマージしてください。</div>
<div class="line">変更内容を反映するために、修正が終わったらサーバの再起動、または「HTMLテンプレートキャッシュ削除」ジョブを実行してください。</div>
</div>
<ul>
<li><p class="first">template.htmlの格納先</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>%PUBLIC_STORAGE_PATH%/forma/html_template/
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">最新バージョンのtemplate.htmlの格納先</p>
<blockquote>
<div><div class="highlight-none"><div class="highlight"><pre>%CONTEXT_PATH%/WEB-INF/storage/public/forma/html_template/
</pre></div>
</div>
<ul>
<li><p class="first">template.html</p>
<div class="line-block">
<div class="line">以下のコード中の「追加対象」の範囲を追加して保存してください。</div>
</div>
<blockquote>
<div><div class="highlight-html"><pre>&lt;imart type="head"&gt;
&lt;link rel="stylesheet" type="text/css" href="forma/css/print.css" media="print"&gt;&lt;/link&gt;
&lt;link rel="stylesheet" type="text/css" href="forma/css/style.css"&gt;&lt;/link&gt;
&lt;link rel="stylesheet" type="text/css" href="forma/css/forma-ui-icons.css"&gt;&lt;/link&gt;
&lt;imart type="condition" validity=imfrBindData.isSmartphone&gt;
&lt;link rel="stylesheet" type="text/css" href="forma/css/smartphone.css"&gt;&lt;/link&gt;
&lt;/imart&gt;

&lt;imart type="jsspRpc" name="formaServerLogic" page="forma/common/ajax/server_logic" /&gt;
&lt;script type="text/javascript" src="forma/csjs/im_forma_click.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="forma/csjs/im_forma.js"&gt;&lt;/script&gt;
&lt;!-- 追加対象 ここから --&gt;
&lt;meta http-equiv="X-Intramart-Secure-Token" content="&lt;imart type="imSecureToken" mode="value" /&gt;"/&gt;
&lt;script src="im_workflow/js/api_base.js" defer&gt;&lt;/script&gt;
&lt;!-- 追加対象 ここまで --&gt;

%HEADER%

&lt;imart type="string" value=imfrBindData.outputScript&gt;&lt;/imart&gt;
&lt;!-- IM-共通マスタ系画面アイテム用のタグ --&gt;</pre>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
</div>
</div>


      </div>
      <div id="sidebar-right" class="sidebar">
        
    <div class="sphinxsidebar">
      <div class="sphinxsidebarwrapper">
<h3><a href="../../../index.html">目次</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../revision_history/index.html">1. 改訂情報</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">2. はじめに</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../flowchart/index.html">3. セットアップの流れ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_file.html">4. IM-FormaDesigner の設定ファイル</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tenant/setup_to_tenant.html">5. テナント環境セットアップ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../change_to_project.html">6. アップデート・パッチの適用</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../uninstration/index.html">7. アンインストール</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../forma_apps/index.html">8. IM-FormaDesigner 帳票アプリケーション集のセットアップ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/index.html">9. 付録</a></li>
</ul>

      </div>
    </div>
      </div>
  </div>

  <div class="nav bottomnav">
    
  <p class="cf">
    <a class="uplink" href="../../../index.html">目次</a>
  </p>

  </div>

  <div class="footer">
    <hr class="bar" />
    <div class="inner">
      <p class="copyright">
           Copyright &copy; 2012 NTT DATA INTRAMART CORPORATION 
      </p>
      <a id="disp-sidebar-switch-btn" class="sidebar-button" title="Switch sidebar position"><span class="mark"></span><span class="text">&#x21C4; Sidebar</span></a>
      <a class="page-top" href="#" title="Go to page top"><span class="mark">&uarr;</span><span class="text">Top</span></a>
    </div>
  </div>
</div>

<script>
  (function($) {
    $(document).ready(function() {
      // shutto翻訳画像切り替え処理
      if (__stt) {
        // Polyfill for ie
        if (!String.prototype.endsWith) {
          String.prototype.endsWith = function(search, this_len) {
            if (this_len === undefined || this_len > this.length) {
              this_len = this.length;
            }
            return this.substring(this_len - search.length, this_len) === search;
          };
        }
        // shuttoのセルフ翻訳画像が優先されないように初期表示時の画像のsrc属性をキャッシュする
        var imgSrcCache = []
        var getImgSrcCache = function(img) {
          for (let i = 0; imgSrcCache.length > i; i++) {
            // alt属性はshuttoのセルフ翻訳が入っていても不変
            if (imgSrcCache[i] === $(img).attr("alt")) return imgSrcCache[i]
          }
          return null
        }
        // 多言語画像が存在する場合のみ置換を行う
        var replaceImg = function(url, $target) {
          $.ajax({
            url: url,
            type: 'HEAD',
            success: function() {
              $target.attr("src", url);
              // 画像をクリックした際に表示される画像も置換する
              if (!!$target.parent().attr("href")) $target.parent().attr("href", url);
            }
          });
        }
        var getFileName = function(str) {
          return str.slice(0, str.lastIndexOf("."));
        }
        var getExt = function(str) {
          return str.slice(str.lastIndexOf("."));
        }
        var trimFileName = function(fileName) {
          if (fileName.endsWith('_en')) return fileName.slice(0, -3);
          if (fileName.endsWith('_zh_CN')) return fileName.slice(0, -6);
          return fileName
        }
        var needSwitchImg = function($target) {
            let src = $target.attr("src")
            // src属性がない場合は対象外
            if (!src) return false
            // src属性とalt属性が一致しない場合（アイコン画像など）は対象外
            if (trimFileName(getFileName(src)) !== getFileName($target.attr("alt"))) return false
            return true
        }
        var switchImgOnInit = function(lang) {
          if (lang === 'zh-CN') lang = 'zh_CN'
          $("img").each(function() {
            let oldSrc = $(this).attr("src");
            if (!needSwitchImg($(this))) return;

            let cache = getImgSrcCache(this)
            if (cache === null) {
              imgSrcCache.push($(this).attr("alt"))
            } else {
              oldSrc = cache
            }

            if (lang === 'ja') return;

            let fileName = getFileName(oldSrc)
            let ext = getExt(oldSrc)
            let newSrc = `${fileName}_${lang}${ext}`
            replaceImg(newSrc, $(this))
          });
        }
        var switchImgOnChange = function(lang) {
          $("img").each(function() {
            let oldSrc = $(this).attr("src");
            if (!needSwitchImg($(this))) return;

            let cache = getImgSrcCache(this)
            if (cache === null) {
              imgSrcCache.push($(this).attr("alt"))
            } else {
              oldSrc = cache
            }

            let fileName = getFileName(oldSrc);
            let ext = getExt(oldSrc);
            switch (lang) {
              case 'ja': {
                fileName = trimFileName(fileName)
                let newSrc = `${fileName}${ext}`
                $(this).attr("src", newSrc);
                if (!!$(this).parent().attr("href")) $(this).parent().attr("href", newSrc);
                break;
              }
              case 'en': {
                fileName = trimFileName(fileName)
                let newSrc = `${fileName}_${lang}${ext}`
                replaceImg(newSrc, $(this))
                break;
              }
              case 'zh-CN': {
                fileName = trimFileName(fileName)
                let newSrc = `${fileName}_zh_CN${ext}`
                replaceImg(newSrc, $(this))
                break;
              }
              default:
                return;
            }
          });
        }
        __stt.get('lang', function(lang) {
          switchImgOnInit(lang)
          // shutto側のセルフ翻訳画像が存在する場合を考慮して、描画後に再度置換処理を行う
          if (!!window.setTimeout) window.setTimeout(switchImgOnInit, 1000, lang);
        });
        __stt.on('selectLang', function(event) {
          switchImgOnChange(event.lang)
          // shutto側のセルフ翻訳画像が存在する場合を考慮して、描画後に再度置換処理を行う
          if (!!window.setTimeout) window.setTimeout(switchImgOnChange, 1000, event.lang);
        });
      }

      var setPosition = function(position) {
        if (position === 'left') {
          $.cookie('im-document-library', 'left', {expires: 30, path: '/'});
        } else {
          $.cookie('im-document-library', 'right', {expires: 30, path: '/'});
        }
      }

      if ($.cookie('im-document-library') == 'right') {
        $("#sidebar-right").addClass('active');
        $("#sidebar-left").removeClass('active');
      }

      $("#disp-sidebar-switch-btn").click(function() {
        $("#sidebar-right").toggleClass('active');
        $("#sidebar-left").toggleClass('active');
        if ($('#sidebar-left').hasClass('active')) {
          setPosition('left');
        } else {
          setPosition('right');
        }
      });
      // ページ内遷移のときに、スクロールの位置がヘッダー分ずれる不具合の対応
      $('a').click(function(e){
        var _href = $(this).attr('href');
        if (_href != null) {
          if (_href.length > 2) {
            if (_href.indexOf('#') == 0) {
              setTimeout(function() {
                var $id = $(_href.replace( /(:|\.|\[|\]|\(|\))|,/g, "\\$1" ));
                $(document).scrollTop($id.position().top);
              },1);
            }
          }
        }
      })
      // 異なるページからアンカーを指定された場合、スクロールの位置がヘッダー分ずれる不具合の対応
      if (window.location.hash.length > 0) {
        setTimeout(function(){
          var $id = $(decodeURIComponent(window.location.hash).replace( /(:|\.|\[|\]|\(|\))|,/g, "\\$1" ));
          if ($id.length > 0) {
            $(document).scrollTop($id.position().top);
          }
        },50);
      }
    });
  })(jQuery);
</script>
<script>
    $('a.reference.external').click(function(){
        window.open($(this).attr('href'));
        return false;
     });
</script>
    </div>
  </body>
</html>
